(function(){function d(h,s){var n=function(){var d=k(n),h=_.first(d).run.apply(n,arguments);_.chain(d).rest().invoke("run");return h};n.id=_.uniqueId();n.context=s||i;n.fnc=h;n.dependents=[];n.dependencies=[];n.memo=d.empty;return _.extend(n,o,d.pluginExtensions)}function k(d){function h(d){if(i[d])return[];i[d]=!0;return _.map(d.dependents,h).concat(d)}var i={};return _.chain(h(d)).flatten().reverse().value()}function h(h){return h&&(h._isReactive||h==d._)?h:d(function(){return h})}var i=this;d._=
{};d.empty={};d.value=function(h){var i=d(function(){arguments.length&&(this.val=arguments[0]);return this.val});i.context=i;i.val=h;return i};d.pluginExtensions={};var o={_isReactive:!0,toString:function(){return this.id+":"+this.fnc.toString()},get:function(){return this.memo===d.empty?this.run():this.memo},run:function(){return this.memo=this.fnc.apply(this.context,this.argumentList(Array.prototype.slice.call(arguments)))},bindTo:function(){var i=Array.prototype.slice.call(arguments).map(h);_.chain(i).difference(this.dependencies).filter(function(h){return h!==
d._}).invoke("addDependent",this);_.chain(this.dependencies).difference(i).filter(function(h){return h!==d._}).invoke("removeDependent",this);this.dependencies=i;return this},removeDependent:function(d){this.dependents=_.without(this.dependents,d)},addDependent:function(d){this.dependents=_.union(this.dependents,d)},argumentList:function(h){return _.map(this.dependencies,function(i){if(i===d._)return h.shift();if(i._isReactive)return i.get()}).concat(h)}};window.$R=d})();
(function(){$R&&($R.dom=function(d){return new $R.Dom(d)},$R.Dom=function(d){this.el=$(d)},$R.Dom.prototype={bindAttributeTo:function(d,k,h){h=h||_.identity;$R(function(i){this.el[0]&&(this.el[0][d]=h(i))},this).bindTo(k);return this},bindInputTo:function(d,k){this.bindAttributeTo("value",d,k);return this},linkInput:function(d,k,h){this.bindInputTo(d,k);d.bindToInput(this.el,h);return this}},_.extend($R.pluginExtensions,{bindToInput:function(d,k){var k=k||_.identity,h=this;$(d).on("change",function(){h(k(this.value))})}}))})();
(function(){function d(a){for(var b=-1,c=a.length,e=[];++b<c;)e.push(a[b]);return e}function k(){}function h(a){return a}function i(){return this}function o(){return!0}function l(a){return"function"===typeof a?a:function(){return a}}function s(a,b,c){return function(){var e=c.apply(b,arguments);return arguments.length?a:e}}function n(a){return null!=a&&!isNaN(a)}function q(a){return a.length}function p(a){return null==a}function r(){}function x(a){function b(){for(var b=c,e=-1,j=b.length,m;++e<j;)(m=
b[e].on)&&m.apply(this,arguments);return a}var c=[],e=new k;b.on=function(b,g){var j=e.get(b),m;if(2>arguments.length)return j&&j.on;j&&(j.on=null,c=c.slice(0,m=c.indexOf(j)).concat(c.slice(m+1)),e.remove(b));g&&c.push(e.set(b,{on:g}));return a};return b}function E(a,b){return b-(a?1+Math.floor(Math.log(a+Math.pow(10,1+Math.floor(Math.log(a)/Math.LN10)-b))/Math.LN10):1)}function J(a){return a+""}function B(a){for(var b=a.lastIndexOf("."),c=0<=b?a.substring(b):(b=a.length,""),e=[];0<b;)e.push(a.substring(b-=
3,b+3));return e.reverse().join(",")+c}function v(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function M(a){return function(b){return 1-a(1-b)}}function I(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function S(a){return a}function U(a){return function(b){return Math.pow(b,a)}}function H(a){return 1-Math.cos(a*Math.PI/2)}function za(a){return Math.pow(2,10*(a-1))}function Fa(a){return 1-Math.sqrt(1-a*a)}function sb(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+
0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function Q(){d3.event.stopPropagation();d3.event.preventDefault()}function Ga(){for(var a=d3.event,b;b=a.sourceEvent;)a=b;return a}function Ha(a){for(var b=new r,c=0,e=arguments.length;++c<e;)b[arguments[c]]=x(b);b.of=function(c,e){return function(j){try{var m=j.sourceEvent=d3.event;j.target=a;d3.event=j;b[j.type].apply(c,e)}finally{d3.event=m}}};return b}function W(a){var b=[a.a,a.b],c=[a.c,a.d],e=Aa(b),f=b[0]*c[0]+
b[1]*c[1],g=-f;c[0]+=g*b[0];c[1]+=g*b[1];g=Aa(c)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,e*=-1,f*=-1);this.rotate=(e?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Yb;this.translate=[a.e,a.f];this.scale=[e,g];this.skew=g?Math.atan2(f,g)*Yb:0}function Aa(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function ca(a){return"transform"==a?d3.interpolateTransform:d3.interpolate}function tb(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return(c-a)*b}}function Ia(a,b){b=b-(a=+a)?
1/(b-a):0;return function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function T(a,b,c){return new da(a,b,c)}function da(a,b,c){this.r=a;this.g=b;this.b=c}function L(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function oa(a,b,c){var e=0,f=0,g=0,j,m;if(j=/([a-z]+)\((.*)\)/i.exec(a))switch(m=j[2].split(","),j[1]){case "hsl":return c(parseFloat(m[0]),parseFloat(m[1])/100,parseFloat(m[2])/100);case "rgb":return b(pa(m[0]),pa(m[1]),pa(m[2]))}if(c=Ua.get(a))return b(c.r,c.g,
c.b);null!=a&&"#"===a.charAt(0)&&(4===a.length?(e=a.charAt(1),e+=e,f=a.charAt(2),f+=f,g=a.charAt(3),g+=g):7===a.length&&(e=a.substring(1,3),f=a.substring(3,5),g=a.substring(5,7)),e=parseInt(e,16),f=parseInt(f,16),g=parseInt(g,16));return b(e,f,g)}function Ja(a,b,c){var e=Math.min(a/=255,b/=255,c/=255),f=Math.max(a,b,c),g=f-e,j=(f+e)/2;g?(e=0.5>j?g/(f+e):g/(2-f-e),a=60*(a==f?(b-c)/g+(b<c?6:0):b==f?(c-a)/g+2:(a-b)/g+4)):e=a=0;return N(a,e,j)}function Va(a,b,c){var a=Ka(a),b=Ka(b),c=Ka(c),e=qa((0.4124564*
a+0.3575761*b+0.1804375*c)/Zb),f=qa((0.2126729*a+0.7151522*b+0.072175*c)/$b),a=qa((0.0193339*a+0.119192*b+0.9503041*c)/ac);return ea(116*f-16,500*(e-f),200*(f-a))}function Ka(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function pa(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function N(a,b,c){return new fa(a,b,c)}function fa(a,b,c){this.h=a;this.s=b;this.l=c}function Ba(a,b,c){function e(a){360<a?a-=360:0>a&&(a+=360);return 60>a?f+(g-f)*a/60:180>
a?g:240>a?f+(g-f)*(240-a)/60:f}var f,g,a=a%360;0>a&&(a+=360);b=0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;g=0.5>=c?c*(1+b):c+b-c*b;f=2*c-g;return T(Math.round(255*e(a+120)),Math.round(255*e(a)),Math.round(255*e(a-120)))}function X(a,b,c){return new ga(a,b,c)}function ga(a,b,c){this.h=a;this.c=b;this.l=c}function ha(a,b,c){return ea(c,Math.cos(a*=Math.PI/180)*b,Math.sin(a)*b)}function ea(a,b,c){return new Z(a,b,c)}function Z(a,b,c){this.l=a;this.a=b;this.b=c}function aa(a,b,c){a=(a+16)/116;c=a-c/200;b=ra(a+b/500)*
Zb;a=ra(a)*$b;c=ra(c)*ac;return T(ub(3.2404542*b-1.5371385*a-0.4985314*c),ub(-0.969266*b+1.8760108*a+0.041556*c),ub(0.0556434*b-0.2040259*a+1.0572252*c))}function la(a,b,c){return X(180*(Math.atan2(c,b)/Math.PI),Math.sqrt(b*b+c*c),a)}function ra(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function qa(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function ub(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function ia(a){vb(a,F);return a}function bc(a){return function(){return Wa(a,
this)}}function cc(a){return function(){return dc(a,this)}}function ec(a,b){function c(){this.removeAttribute(a)}function e(){this.removeAttributeNS(a.space,a.local)}function f(){this.setAttribute(a,b)}function g(){this.setAttributeNS(a.space,a.local,b)}function j(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function m(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=d3.ns.qualify(a);
return null==b?a.local?e:c:"function"===typeof b?a.local?m:j:a.local?g:f}function fc(a){return RegExp("(?:^|\\s+)"+d3.requote(a)+"(?:\\s+|$)","g")}function gc(a,b){function c(){for(var c=-1;++c<f;)a[c](this,b)}function e(){for(var c=-1,e=b.apply(this,arguments);++c<f;)a[c](this,e)}var a=a.trim().split(/\s+/).map(xd),f=a.length;return"function"===typeof b?e:c}function xd(a){var b=fc(a);return function(c,e){if(f=c.classList)return e?f.add(a):f.remove(a);var f=c.className,g=null!=f.baseVal,j=g?f.baseVal:
f;e?(b.lastIndex=0,b.test(j)||(j=(j+" "+a).trim().replace(/\s+/g," "),g?f.baseVal=j:c.className=j)):j&&(j=j.replace(b," ").trim().replace(/\s+/g," "),g?f.baseVal=j:c.className=j)}}function hc(a,b,c){function e(){this.style.removeProperty(a)}function f(){this.style.setProperty(a,b,c)}function g(){var e=b.apply(this,arguments);null==e?this.style.removeProperty(a):this.style.setProperty(a,e,c)}return null==b?e:"function"===typeof b?g:f}function ic(a,b){function c(){delete this[a]}function e(){this[a]=
b}function f(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"===typeof b?f:e}function jc(a){return function(){return kc(this,a)}}function yd(a){arguments.length||(a=d3.ascending);return function(b,c){return a(b&&b.__data__,c&&c.__data__)}}function lc(a,b,c){function e(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function f(){function f(a){var c=d3.event;d3.event=a;ma[0]=j.__data__;try{b.apply(j,ma)}finally{d3.event=c}}var j=this,
ma=arguments;e.call(this);this.addEventListener(a,this[g]=f,f.$=c);f._=b}var g="__on"+a,j=a.indexOf(".");0<j&&(a=a.substring(0,j));return b?f:e}function na(a,b){for(var c=0,e=a.length;c<e;c++)for(var f=a[c],g=0,j=f.length,m;g<j;g++)(m=f[g])&&b(m,g,c);return a}function mc(a){vb(a,sa);return a}function Xa(a,b,c){vb(a,R);var e=new k,f=d3.dispatch("start","end"),g=Ya;a.id=b;a.time=c;a.tween=function(b,c){if(2>arguments.length)return e.get(b);null==c?e.remove(b):e.set(b,c);return a};a.ease=function(b){if(!arguments.length)return g;
g="function"===typeof b?b:d3.ease.apply(d3,arguments);return a};a.each=function(b,c){if(2>arguments.length)return zd.call(a,b);f.on(b,c);return a};d3.timer(function(j){return na(a,function(a,u){function ma(g){if(y.active>b)return h();y.active=b;e.forEach(function(b,c){(c=c.call(a,k,u))&&C.push(c)});f.start.call(a,k,u);d(g)||d3.timer(d,0,c);return 1}function d(c){if(y.active!==b)return h();for(var c=(c-i)/Ca,e=g(c),j=C.length;0<j;)C[--j].call(a,e);if(1<=c)return h(),ta=b,f.end.call(a,k,u),ta=0,1}function h(){--y.count||
delete a.__transition__;return 1}var C=[],i=a.delay,Ca=a.duration,y=(a=a.node).__transition__||(a.__transition__={active:0,count:0}),k=a.__data__;++y.count;i<=j?ma(j):d3.timer(ma,i,c)})},0,c);return a}function zd(a){var b=ta,c=Ya,e=Za,f=$a;ta=this.id;Ya=this.ease();na(this,function(b,c,e){Za=b.delay;$a=b.duration;a.call(b=b.node,b.__data__,c,e)});ta=b;Ya=c;Za=e;$a=f;return this}function Ad(a,b,c){return""!=c&&Ma}function wb(){for(var a,b=Date.now(),c=ua;c;)a=b-c.then,a>=c.delay&&(c.flush=c.callback(a)),
c=c.next;a=nc()-b;24<a?(isFinite(a)&&(clearTimeout(ab),ab=setTimeout(wb,a)),bb=0):(bb=1,oc(wb))}function nc(){for(var a=null,b=ua,c=Infinity;b;)b.flush?b=a?a.next=b.next:ua=b.next:(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c}function pc(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var e=c.createSVGPoint();if(0>xb&&(window.scrollX||window.scrollY)){var c=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0),f=c[0][0].getScreenCTM();xb=!(f.f||
f.e);c.remove()}xb?(e.x=b.pageX,e.y=b.pageY):(e.x=b.clientX,e.y=b.clientY);e=e.matrixTransform(a.getScreenCTM().inverse());return[e.x,e.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Na(a){var b=a[0],a=a[a.length-1];return b<a?[b,a]:[a,b]}function cb(a){return a.rangeExtent?a.rangeExtent():Na(a.range())}function db(a,b){var c=0,e=a.length-1,f=a[c],g=a[e],j;g<f&&(j=c,c=e,e=j,j=f,f=g,g=j);if(b=b(g-f))a[c]=b.floor(f),a[e]=b.ceil(g);return a}
function Bd(){return Math}function qc(a,b,c,e){function f(){var f=2<Math.min(a.length,b.length)?Cd:Dd,ma=e?Ia:tb;j=f(a,b,ma,c);m=f(b,a,ma,d3.interpolate);return g}function g(a){return j(a)}var j,m;g.invert=function(a){return m(a)};g.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return f()};g.range=function(a){if(!arguments.length)return b;b=a;return f()};g.rangeRound=function(a){return g.range(a).interpolate(d3.interpolateRound)};g.clamp=function(a){if(!arguments.length)return e;
e=a;return f()};g.interpolate=function(a){if(!arguments.length)return c;c=a;return f()};g.ticks=function(b){return yb(a,b)};g.tickFormat=function(b){return zb(a,b)};g.nice=function(){db(a,rc);return f()};g.copy=function(){return qc(a,b,c,e)};return f()}function sc(a,b){return d3.rebind(a,b,"range","rangeRound","interpolate","clamp")}function rc(a){return(a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1))&&{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function tc(a,
b){var c=Na(a),e=c[1]-c[0],f=Math.pow(10,Math.floor(Math.log(e/b)/Math.LN10)),e=b/e*f;0.15>=e?f*=10:0.35>=e?f*=5:0.75>=e&&(f*=2);c[0]=Math.ceil(c[0]/f)*f;c[1]=Math.floor(c[1]/f)*f+0.5*f;c[2]=f;return c}function yb(a,b){return d3.range.apply(d3,tc(a,b))}function zb(a,b){return d3.format(",."+Math.max(0,-Math.floor(Math.log(tc(a,b)[2])/Math.LN10+0.01))+"f")}function Dd(a,b,c,e){var f=c(a[0],a[1]),g=e(b[0],b[1]);return function(a){return g(f(a))}}function Cd(a,b,c,e){var f=[],g=[],j=0,m=Math.min(a.length,
b.length)-1;a[m]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++j<=m;)f.push(c(a[j-1],a[j])),g.push(e(b[j-1],b[j]));return function(b){var c=d3.bisect(a,b,1,m)-1;return g[c](f[c](b))}}function uc(a,b){function c(c){return a(b(c))}var e=b.pow;c.invert=function(b){return e(a.invert(b))};c.domain=function(f){if(!arguments.length)return a.domain().map(e);b=0>f[0]?eb:Ab;e=b.pow;a.domain(f.map(b));return c};c.nice=function(){a.domain(db(a.domain(),Bd));return c};c.ticks=function(){var c=Na(a.domain()),
g=[];if(c.every(isFinite)){var j=Math.floor(c[0]),m=Math.ceil(c[1]),u=e(c[0]),c=e(c[1]);if(b===eb)for(g.push(e(j));j++<m;)for(var d=9;0<d;d--)g.push(e(j)*d);else{for(;j<m;j++)for(d=1;10>d;d++)g.push(e(j)*d);g.push(e(j))}for(j=0;g[j]<u;j++);for(m=g.length;g[m-1]>c;m--);g=g.slice(j,m)}return g};c.tickFormat=function(a,g){2>arguments.length&&(g=Ed);if(1>arguments.length)return g;var j=Math.max(0.1,a/c.ticks().length),m=b===eb?(u=-1.0E-12,Math.floor):(u=1.0E-12,Math.ceil),u;return function(a){return a/
e(m(b(a)+u))<=j?g(a):""}};c.copy=function(){return uc(a.copy(),b)};return sc(c,a)}function Ab(a){return Math.log(0>a?0:a)/Math.LN10}function eb(a){return-Math.log(0<a?0:-a)/Math.LN10}function vc(a,b){function c(b){return a(e(b))}var e=fb(b),f=fb(1/b);c.invert=function(b){return f(a.invert(b))};c.domain=function(b){if(!arguments.length)return a.domain().map(f);a.domain(b.map(e));return c};c.ticks=function(a){return yb(c.domain(),a)};c.tickFormat=function(a){return zb(c.domain(),a)};c.nice=function(){return c.domain(db(c.domain(),
rc))};c.exponent=function(a){if(!arguments.length)return b;var j=c.domain();e=fb(b=a);f=fb(1/b);return c.domain(j)};c.copy=function(){return vc(a.copy(),b)};return sc(c,a)}function fb(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function wc(a,b){function c(b){return g[((f.get(b)||f.set(b,a.push(b)))-1)%g.length]}function e(b,c){return d3.range(a.length).map(function(a){return b+c*a})}var f,g,j;c.domain=function(e){if(!arguments.length)return a;a=[];f=new k;for(var g=-1,j=e.length,
d;++g<j;)f.has(d=e[g])||f.set(d,a.push(d));return c[b.t].apply(c,b.a)};c.range=function(a){if(!arguments.length)return g;g=a;j=0;b={t:"range",a:arguments};return c};c.rangePoints=function(f,u){2>arguments.length&&(u=0);var d=f[0],h=f[1],z=(h-d)/(a.length-1+u);g=e(2>a.length?(d+h)/2:d+z*u/2,z);j=0;b={t:"rangePoints",a:arguments};return c};c.rangeBands=function(f,u,d){2>arguments.length&&(u=0);3>arguments.length&&(d=u);var h=f[1]<f[0],z=f[h-0],C=(f[1-h]-z)/(a.length-u+2*d);g=e(z+C*d,C);h&&g.reverse();
j=C*(1-u);b={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(f,u,d){2>arguments.length&&(u=0);3>arguments.length&&(d=u);var h=f[1]<f[0],z=f[h-0],C=f[1-h],i=Math.floor((C-z)/(a.length-u+2*d));g=e(z+Math.round((C-z-(a.length-u)*i)/2),i);h&&g.reverse();j=Math.round(i*(1-u));b={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return j};c.rangeExtent=function(){return Na(b.a[0])};c.copy=function(){return wc(a,b)};return c.domain(a)}function xc(a,b){function c(){var c=
0,j=b.length;for(f=[];++c<j;)f[c-1]=d3.quantile(a,c/j);return e}function e(a){return isNaN(a=+a)?NaN:b[d3.bisect(f,a)]}var f;e.domain=function(b){if(!arguments.length)return a;a=b.filter(function(a){return!isNaN(a)}).sort(d3.ascending);return c()};e.range=function(a){if(!arguments.length)return b;b=a;return c()};e.quantiles=function(){return f};e.copy=function(){return xc(a,b)};return c()}function yc(a,b,c){function e(b){return c[Math.max(0,Math.min(j,Math.floor(g*(b-a))))]}function f(){g=c.length/
(b-a);j=c.length-1;return e}var g,j;e.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];b=+c[c.length-1];return f()};e.range=function(a){if(!arguments.length)return c;c=a;return f()};e.copy=function(){return yc(a,b,c)};return f()}function zc(a,b){function c(c){return b[d3.bisect(a,c)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;b=a;return c};c.copy=function(){return zc(a,b)};return c}function Ac(a){function b(a){return+a}
b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};b.ticks=function(b){return yb(a,b)};b.tickFormat=function(b){return zb(a,b)};b.copy=function(){return Ac(a)};return b}function Fd(a){return a.innerRadius}function Gd(a){return a.outerRadius}function Bc(a){return a.startAngle}function Cc(a){return a.endAngle}function Dc(a){function b(b){function j(){d.push("M",g(a(h),m))}for(var d=[],h=[],C=-1,i=b.length,k,y=l(c),K=l(e);++C<i;)f.call(this,k=b[C],C)?h.push([+y.call(this,
k,C),+K.call(this,k,C)]):h.length&&(j(),h=[]);h.length&&j();return d.length?d.join(""):null}var c=Bb,e=Ec,f=o,g=V,j=g.key,m=0.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return e;e=a;return b};b.defined=function(a){if(!arguments.length)return f;f=a;return b};b.interpolate=function(a){if(!arguments.length)return j;j="function"===typeof a?g=a:(g=Cb.get(a)||V).key;return b};b.tension=function(a){if(!arguments.length)return m;m=a;return b};return b}
function Bb(a){return a[0]}function Ec(a){return a[1]}function V(a){return a.join("L")}function Db(a){for(var b=0,c=a.length,e=a[0],f=[e[0],",",e[1]];++b<c;)f.push("V",(e=a[b])[1],"H",e[0]);return f.join("")}function Eb(a){for(var b=0,c=a.length,e=a[0],f=[e[0],",",e[1]];++b<c;)f.push("H",(e=a[b])[0],"V",e[1]);return f.join("")}function gb(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return V(a);var c=a.length!=b.length,e="",f=a[0],g=a[1],j=b[0],m=j,u=1;c&&(e+="Q"+(g[0]-2*j[0]/3)+","+
(g[1]-2*j[1]/3)+","+g[0]+","+g[1],f=a[1],u=2);if(1<b.length){m=b[1];g=a[u];u++;e+="C"+(f[0]+j[0])+","+(f[1]+j[1])+","+(g[0]-m[0])+","+(g[1]-m[1])+","+g[0]+","+g[1];for(f=2;f<b.length;f++,u++)g=a[u],m=b[f],e+="S"+(g[0]-m[0])+","+(g[1]-m[1])+","+g[0]+","+g[1]}c&&(c=a[u],e+="Q"+(g[0]+2*m[0]/3)+","+(g[1]+2*m[1]/3)+","+c[0]+","+c[1]);return e}function Fb(a,b){for(var c=[],e=(1-b)/2,f,g=a[0],j=a[1],m=1,u=a.length;++m<u;)f=g,g=j,j=a[m],c.push([e*(j[0]-f[0]),e*(j[1]-f[1])]);return c}function Fc(a){if(3>a.length)return V(a);
var b=1,c=a.length,e=a[0],f=e[0],g=e[1],j=[f,f,f,(e=a[1])[0]],m=[g,g,g,e[1]],f=[f,",",g];for(Oa(f,j,m);++b<c;)e=a[b],j.shift(),j.push(e[0]),m.shift(),m.push(e[1]),Oa(f,j,m);for(b=-1;2>++b;)j.shift(),j.push(e[0]),m.shift(),m.push(e[1]),Oa(f,j,m);return f.join("")}function ba(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Oa(a,b,c){a.push("C",ba(Gc,b),",",ba(Gc,c),",",ba(Hc,b),",",ba(Hc,c),",",ba(Da,b),",",ba(Da,c))}function Gb(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Ic(a){for(var b,
c=-1,e=a.length,f,g;++c<e;)b=a[c],f=b[0],g=b[1]+va,b[0]=f*Math.cos(g),b[1]=f*Math.sin(g);return a}function Jc(a){function b(b){function u(){i.push("M",m(a(k),z),h,d(a(y.reverse()),z),"Z")}for(var i=[],y=[],k=[],n=-1,A=b.length,La,p=l(c),G=l(f),D=c===e?function(){return s}:l(e),o=f===g?function(){return r}:l(g),s,r;++n<A;)j.call(this,La=b[n],n)?(y.push([s=+p.call(this,La,n),r=+G.call(this,La,n)]),k.push([+D.call(this,La,n),+o.call(this,La,n)])):y.length&&(u(),y=[],k=[]);y.length&&u();return i.length?
i.join(""):null}var c=Bb,e=Bb,f=0,g=Ec,j=o,m=V,u=m.key,d=m,h="L",z=0.7;b.x=function(a){if(!arguments.length)return e;c=e=a;return b};b.x0=function(a){if(!arguments.length)return c;c=a;return b};b.x1=function(a){if(!arguments.length)return e;e=a;return b};b.y=function(a){if(!arguments.length)return g;f=g=a;return b};b.y0=function(a){if(!arguments.length)return f;f=a;return b};b.y1=function(a){if(!arguments.length)return g;g=a;return b};b.defined=function(a){if(!arguments.length)return j;j=a;return b};
b.interpolate=function(a){if(!arguments.length)return u;u="function"===typeof a?m=a:(m=Cb.get(a)||V).key;d=m.reverse||m;h=m.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return z;z=a;return b};return b}function Kc(a){return a.source}function Lc(a){return a.target}function Hd(a){return a.radius}function Mc(a){return[a.x,a.y]}function Id(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+va;return[c*Math.cos(b),c*Math.sin(b)]}}function Jd(){return 64}function Kd(){return"circle"}
function Nc(a){a=Math.sqrt(a/Math.PI);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Oc(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function Pc(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function Ld(a,b,c){e=[];if(c&&1<b.length){for(var a=Na(a.domain()),e,f=-1,g=b.length,j=(b[1]-b[0])/++c,m,u;++f<g;)for(m=c;0<--m;)(u=+b[f]-m*j)>=a[0]&&e.push(u);--f;for(m=0;++m<c&&(u=+b[f]+m*j)<a[1];)e.push(u)}return e}function Md(){Pa||
(Pa=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var a=d3.event,b;try{Pa.scrollTop=1E3,Pa.dispatchEvent(a),b=1E3-Pa.scrollTop}catch(c){b=a.wheelDelta||5*-a.detail}return b}function Nd(a){var b=a.source,a=a.target,c;var e=a;if(b===e)c=b;else{c=Qc(b);for(var e=Qc(e),f=c.pop(),g=e.pop(),j=null;f===g;)j=f,f=c.pop(),g=e.pop();c=j}for(e=[b];b!==c;)b=b.parent,
e.push(b);for(b=e.length;a!==c;)e.splice(b,0,a),a=a.parent;return e}function Qc(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function Rc(a){a.fixed|=2}function Od(a){a!==wa&&(a.fixed&=1)}function Pd(){wa.fixed&=1;Hb=wa=null}function Qd(){wa.px=d3.event.x;wa.py=d3.event.y;Hb.resume()}function Sc(a,b,c){var e=0,f=0;a.charge=0;if(!a.leaf)for(var g=a.nodes,j=g.length,m=-1,u;++m<j;)u=g[m],null!=u&&(Sc(u,b,c),a.charge+=u.charge,e+=u.charge*u.cx,f+=u.charge*u.cy);a.point&&
(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,e+=b*a.point.x,f+=b*a.point.y);a.cx=e/a.charge;a.cy=f/a.charge}function Rd(){return 20}function Sd(){return 1}function Td(a){return a.x}function Ud(a){return a.y}function Vd(a,b,c){a.y0=b;a.y=c}function Ib(a){return d3.range(a.length)}function Jb(a){for(var b=-1,a=a[0].length,c=[];++b<a;)c[b]=0;return c}function Wd(a){for(var b=1,c=0,e=a[0][1],f,g=a.length;b<g;++b)if((f=a[b][1])>e)c=
b,e=f;return c}function Xd(a){return a.reduce(Yd,0)}function Yd(a,b){return a+b[1]}function Zd(a,b){return Tc(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function Tc(a,b){for(var c=-1,e=+a[0],f=(a[1]-e)/b,g=[];++c<=b;)g[c]=f*c+e;return g}function $d(a){return[d3.min(a),d3.max(a)]}function Qa(a,b){d3.rebind(a,b,"sort","children","value");a.links=ae;a.nodes=function(b){Kb=!0;return(a.nodes=a)(b)};return a}function be(a){return a.children}function ce(a){return a.value}function de(a,b){return b.value-
a.value}function ae(a){return d3.merge(a.map(function(a){return(a.children||[]).map(function(c){return{source:a,target:c}})}))}function ee(a,b){return a.value-b.value}function Lb(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function Uc(a,b){a._pack_next=b;b._pack_prev=a}function Vc(a,b){var c=b.x-a.x,e=b.y-a.y,f=a.r+b.r;return 0.001<f*f-c*c-e*e}function Wc(a){function b(a){e=Math.min(a.x-a.r,e);f=Math.max(a.x+a.r,f);g=Math.min(a.y-a.r,g);j=Math.max(a.y+a.r,j)}
if((c=a.children)&&(t=c.length)){var c,e=Infinity,f=-Infinity,g=Infinity,j=-Infinity,m,u,d,h,i,C,t;c.forEach(fe);m=c[0];m.x=-m.r;m.y=0;b(m);if(1<t&&(u=c[1],u.x=u.r,u.y=0,b(u),2<t)){d=c[2];Xc(m,u,d);b(d);Lb(m,d);m._pack_prev=d;Lb(d,u);u=m._pack_next;for(h=3;h<t;h++){Xc(m,u,d=c[h]);var k=0,y=1,K=1;for(i=u._pack_next;i!==u;i=i._pack_next,y++)if(Vc(i,d)){k=1;break}if(1==k)for(C=m._pack_prev;C!==i._pack_prev&&!Vc(C,d);C=C._pack_prev,K++);k?(y<K||y==K&&u.r<m.r?Uc(m,u=i):Uc(m=C,u),h--):(Lb(m,d),u=d,b(d))}}m=
(e+f)/2;u=(g+j)/2;for(h=i=0;h<t;h++)d=c[h],d.x-=m,d.y-=u,i=Math.max(i,d.r+Math.sqrt(d.x*d.x+d.y*d.y));a.r=i;c.forEach(ge)}}function fe(a){a._pack_next=a._pack_prev=a}function ge(a){delete a._pack_next;delete a._pack_prev}function Yc(a,b,c,e){var f=a.children;a.x=b+=e*a.x;a.y=c+=e*a.y;a.r*=e;if(f)for(var a=-1,g=f.length;++a<g;)Yc(f[a],b,c,e)}function Xc(a,b,c){var e=a.r+c.r,f=b.x-a.x,g=b.y-a.y;if(e&&(f||g)){var j=b.r+c.r,m=f*f+g*g,j=j*j,e=e*e,b=0.5+(e-j)/(2*m),j=Math.sqrt(Math.max(0,2*j*(e+m)-(e-=
m)*e-j*j))/(2*m);c.x=a.x+b*f+j*g;c.y=a.y+b*g-j*f}else c.x=a.x+e,c.y=a.y}function he(a){return 1+d3.max(a,function(a){return a.y})}function ie(a){return a.reduce(function(a,c){return a+c.x},0)/a.length}function Zc(a){var b=a.children;return b&&b.length?Zc(b[0]):a}function $c(a){var b=a.children,c;return b&&(c=b.length)?$c(b[c-1]):a}function ad(a,b){return a.parent==b.parent?1:2}function Mb(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function Nb(a){var b=a.children,c;return b&&(c=b.length)?
b[c-1]:a._tree.thread}function hb(a,b){var c=a.children;if(c&&(f=c.length))for(var e,f,g=-1;++g<f;)if(0<b(e=hb(c[g],b),a))a=e;return a}function je(a,b){return a.x-b.x}function ke(a,b){return b.x-a.x}function le(a,b){return a.depth-b.depth}function ja(a,b){function c(a,f){var g=a.children;if(g&&(d=g.length))for(var j,m=null,u=-1,d;++u<d;)j=g[u],c(j,m),m=j;b(a,f)}c(a,null)}function Ob(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function bd(a,b){var c=a.x+b[3],e=a.y+b[0],f=a.dx-b[1]-b[3],g=a.dy-b[0]-b[2];
0>f&&(c+=f/2,f=0);0>g&&(e+=g/2,g=0);return{x:c,y:e,dx:f,dy:g}}function xa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function cd(a){return a.substring(0,3)}function ib(a,b,c,e){for(var f,g=0,j=b.length,m=c.length;g<j;){if(e>=m)return-1;f=b.charCodeAt(g++);if(37==f){if(f=me[b.charAt(g++)],!f||0>(e=f(a,c,e)))return-1}else if(f!=c.charCodeAt(e++))return-1}return e}function jb(a){return RegExp("^(?:"+a.map(d3.requote).join("|")+")","i")}function dd(a){for(var b=
new k,c=-1,e=a.length;++c<e;)b.set(a[c].toLowerCase(),c);return b}function ed(a,b,c){O.lastIndex=0;return(b=O.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function fd(a,b,c){O.lastIndex=0;return(b=O.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Pb(a){return a.toISOString()}function ya(a,b,c){function e(b){var c=a(b),e=g(c,1);return b-c<e-b?c:e}function f(c){b(c=a(new P(c-1)),1);return c}function g(a,c){b(a=new P(+a),c);return a}function j(a,e,g){var a=f(a),j=[];if(1<g)for(;a<
e;)c(a)%g||j.push(new Date(+a)),b(a,1);else for(;a<e;)j.push(new Date(+a)),b(a,1);return j}a.floor=a;a.round=e;a.ceil=f;a.offset=g;a.range=j;var m=a.utc=kb(a);m.floor=m;m.round=kb(e);m.ceil=kb(f);m.offset=kb(g);m.range=function(a,b,c){try{P=xa;var e=new xa;e._=a;return j(e,b,c)}finally{P=Date}};return a}function kb(a){return function(b,c){try{P=xa;var e=new xa;e._=b;return a(e,c)._}finally{P=Date}}}function Qb(a,b,c){function e(b){return a(b)}e.invert=function(b){return Rb(a.invert(b))};e.domain=
function(b){if(!arguments.length)return a.domain().map(Rb);a.domain(b);return e};e.nice=function(a){return e.domain(db(e.domain(),function(){return a}))};e.ticks=function(c,g){var j,m=e.domain();j=m[0];m=m[m.length-1];j=j<m?[j,m]:[m,j];if("function"!==typeof c){var m=(j[1]-j[0])/c,d=d3.bisect(lb,m);if(d==lb.length)return b.year(j,c);if(!d)return a.ticks(c).map(Rb);Math.log(m/lb[d-1])<Math.log(lb[d]/m)&&--d;c=b[d];g=c[1];c=c[0].range}return c(j[0],new Date(+j[1]+1),g)};e.tickFormat=function(){return c};
e.copy=function(){return Qb(a.copy(),b,c)};return d3.rebind(e,a,"range","rangeRound","interpolate","clamp")}function Rb(a){return new Date(a)}function gd(a){return function(b){for(var c=a.length-1,e=a[c];!e[1](b);)e=a[--c];return e[0](b)}}function Sb(a){var b=new Date(a,0,1);b.setFullYear(a);return b}function ne(a){var b=a.getFullYear(),c=Sb(b),e=Sb(b+1);return b+(a-c)/(e-c)}function Tb(a){var b=new Date(Date.UTC(a,0,1));b.setUTCFullYear(a);return b}function oe(a){var b=a.getUTCFullYear(),c=Tb(b),
e=Tb(b+1);return b+(a-c)/(e-c)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(Te){var hd=CSSStyleDeclaration.prototype,pe=hd.setProperty;hd.setProperty=function(a,b,c){pe.call(this,a,b+"",c)}}d3={version:"2.10.0"};var Ra=function(a){return Array.prototype.slice.call(a)};try{Ra(document.documentElement.childNodes)[0].nodeType}catch(Ue){Ra=d}var vb=[].__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=
b[c]};d3.map=function(a){var b=new k,c;for(c in a)b.set(c,a[c]);return b};(function(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:false})}catch(e){a.prototype=b}})(k,{has:function(a){return Sa+a in this},get:function(a){return this[Sa+a]},set:function(a,b){return this[Sa+a]=b},remove:function(a){a=Sa+a;return a in this&&delete this[a]},keys:function(){var a=[];this.forEach(function(b){a.push(b)});return a},values:function(){var a=[];this.forEach(function(b,c){a.push(c)});
return a},entries:function(){var a=[];this.forEach(function(b,c){a.push({key:b,value:c})});return a},forEach:function(a){for(var b in this)b.charCodeAt(0)===qe&&a.call(this,b.substring(1),this[b])}});var Sa="\x00",qe=Sa.charCodeAt(0);d3.functor=l;d3.rebind=function(a,b){for(var c=1,e=arguments.length,f;++c<e;)a[f=arguments[c]]=s(a,b,b[f]);return a};d3.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};d3.mean=function(a,b){var c=a.length,
e,f=0,g=-1,j=0;if(arguments.length===1)for(;++g<c;){if(n(e=a[g]))f=f+(e-f)/++j}else for(;++g<c;)if(n(e=b.call(a,a[g],g)))f=f+(e-f)/++j;return j?f:void 0};d3.median=function(a,b){arguments.length>1&&(a=a.map(b));a=a.filter(n);return a.length?d3.quantile(a.sort(d3.ascending),0.5):void 0};d3.min=function(a,b){var c=-1,e=a.length,f,g;if(arguments.length===1){for(;++c<e&&((f=a[c])==null||f!=f);)f=void 0;for(;++c<e;)if((g=a[c])!=null&&f>g)f=g}else{for(;++c<e&&((f=b.call(a,a[c],c))==null||f!=f);)f=void 0;
for(;++c<e;)if((g=b.call(a,a[c],c))!=null&&f>g)f=g}return f};d3.max=function(a,b){var c=-1,e=a.length,f,g;if(arguments.length===1){for(;++c<e&&((f=a[c])==null||f!=f);)f=void 0;for(;++c<e;)if((g=a[c])!=null&&g>f)f=g}else{for(;++c<e&&((f=b.call(a,a[c],c))==null||f!=f);)f=void 0;for(;++c<e;)if((g=b.call(a,a[c],c))!=null&&g>f)f=g}return f};d3.extent=function(a,b){var c=-1,e=a.length,f,g,j;if(arguments.length===1){for(;++c<e&&((f=j=a[c])==null||f!=f);)f=j=void 0;for(;++c<e;)if((g=a[c])!=null){f>g&&(f=
g);j<g&&(j=g)}}else{for(;++c<e&&((f=j=b.call(a,a[c],c))==null||f!=f);)f=void 0;for(;++c<e;)if((g=b.call(a,a[c],c))!=null){f>g&&(f=g);j<g&&(j=g)}}return[f,j]};d3.random={normal:function(a,b){var c=arguments.length;c<2&&(b=1);c<1&&(a=0);return function(){var c,f;do{c=Math.random()*2-1;f=Math.random()*2-1;f=c*c+f*f}while(!f||f>1);return a+b*c*Math.sqrt(-2*Math.log(f)/f)}},logNormal:function(a,b){var c=arguments.length;c<2&&(b=1);c<1&&(a=0);var e=d3.random.normal();return function(){return Math.exp(a+
b*e())}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b=b+Math.random();return b/a}}};d3.sum=function(a,b){var c=0,e=a.length,f,g=-1;if(arguments.length===1)for(;++g<e;){if(!isNaN(f=+a[g]))c=c+f}else for(;++g<e;)if(!isNaN(f=+b.call(a,a[g],g)))c=c+f;return c};d3.quantile=function(a,b){var c=(a.length-1)*b+1,e=Math.floor(c),f=a[e-1];return(c=c-e)?f+c*(a[e]-f):f};d3.transpose=function(a){return d3.zip.apply(d3,a)};d3.zip=function(){if(!(f=arguments.length))return[];for(var a=-1,b=
d3.min(arguments,q),c=Array(b);++a<b;)for(var e=-1,f,g=c[a]=Array(f);++e<f;)g[e]=arguments[e][a];return c};d3.bisector=function(a){return{left:function(b,c,e,f){arguments.length<3&&(e=0);if(arguments.length<4)f=b.length;for(;e<f;){var g=e+f>>>1;a.call(b,b[g],g)<c?e=g+1:f=g}return e},right:function(b,c,e,f){arguments.length<3&&(e=0);if(arguments.length<4)f=b.length;for(;e<f;){var g=e+f>>>1;c<a.call(b,b[g],g)?f=g:e=g+1}return e}}};var id=d3.bisector(function(a){return a});d3.bisectLeft=id.left;d3.bisect=
d3.bisectRight=id.right;d3.first=function(a,b){var c=0,e=a.length,f=a[0],g;if(arguments.length===1)b=d3.ascending;for(;++c<e;)if(b.call(a,f,g=a[c])>0)f=g;return f};d3.last=function(a,b){var c=0,e=a.length,f=a[0],g;if(arguments.length===1)b=d3.ascending;for(;++c<e;)if(b.call(a,f,g=a[c])<=0)f=g;return f};d3.nest=function(){function a(b,f){if(f>=e.length)return j?j.call(c,b):g?b.sort(g):b;for(var d=-1,h=b.length,i=e[f++],C,t,Ca=new k,y,K={};++d<h;)(y=Ca.get(C=i(t=b[d])))?y.push(t):Ca.set(C,[t]);Ca.forEach(function(b){K[b]=
a(Ca.get(b),f)});return K}function b(a,c){if(c>=e.length)return a;var g=[],j=f[c++],d;for(d in a)g.push({key:d,values:b(a[d],c)});j&&g.sort(function(a,b){return j(a.key,b.key)});return g}var c={},e=[],f=[],g,j;c.map=function(b){return a(b,0)};c.entries=function(c){return b(a(c,0),0)};c.key=function(a){e.push(a);return c};c.sortKeys=function(a){f[e.length-1]=a;return c};c.sortValues=function(a){g=a;return c};c.rollup=function(a){j=a;return c};return c};d3.keys=function(a){var b=[],c;for(c in a)b.push(c);
return b};d3.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};d3.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};d3.permute=function(a,b){for(var c=[],e=-1,f=b.length;++e<f;)c[e]=a[b[e]];return c};d3.merge=function(a){return Array.prototype.concat.apply([],a)};d3.split=function(a,b){var c=[],e=[],f,g=-1,j=a.length;for(arguments.length<2&&(b=p);++g<j;)if(b.call(e,f=a[g],g))e=[];else{e.length||c.push(e);e.push(f)}return c};d3.range=function(a,b,c){if(arguments.length<
3){c=1;if(arguments.length<2){b=a;a=0}}if((b-a)/c===Infinity)throw Error("infinite range");var e=[],f;f=Math.abs(c);for(var g=1;f*g%1;)g=g*10;f=g;var g=-1,j,a=a*f,b=b*f,c=c*f;if(c<0)for(;(j=a+c*++g)>b;)e.push(j/f);else for(;(j=a+c*++g)<b;)e.push(j/f);return e};d3.requote=function(a){return a.replace(re,"\\$&")};var re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};d3.xhr=function(a,b,c){var e=new XMLHttpRequest;if(arguments.length<
3){c=b;b=null}else b&&e.overrideMimeType&&e.overrideMimeType(b);e.open("GET",a,true);b&&e.setRequestHeader("Accept",b);e.onreadystatechange=function(){if(e.readyState===4){var a=e.status;c(!a&&e.response||a>=200&&a<300||a===304?e:null)}};e.send(null)};d3.text=function(a,b,c){if(arguments.length<3){c=b;b=null}d3.xhr(a,b,function(a){c(a&&a.responseText)})};d3.json=function(a,b){d3.text(a,"application/json",function(a){b(a?JSON.parse(a):null)})};d3.html=function(a,b){d3.text(a,"text/html",function(a){if(a!=
null){var e=document.createRange();e.selectNode(document.body);a=e.createContextualFragment(a)}b(a)})};d3.xml=function(a,b,c){if(arguments.length<3){c=b;b=null}d3.xhr(a,b,function(a){c(a&&a.responseXML)})};var Ub={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Ub,qualify:function(a){var b=a.indexOf(":"),c=a;if(b>=0){c=a.substring(0,b);a=a.substring(b+
1)}return Ub.hasOwnProperty(c)?{space:Ub[c],local:a}:a}};d3.dispatch=function(){for(var a=new r,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=x(a);return a};r.prototype.on=function(a,b){var c=a.indexOf("."),e="";if(c>0){e=a.substring(c+1);a=a.substring(0,c)}return arguments.length<2?this[a].on(e):this[a].on(e,b)};d3.format=function(a){var a=se.exec(a),b=a[1]||" ",c=a[3]||"",e=a[5],f=+a[6],g=a[7],j=a[8],m=a[9],d=1,h="",i=false;j&&(j=+j.substring(1));if(e){b="0";g&&(f=f-Math.floor((f-1)/4))}switch(m){case "n":g=
true;m="g";break;case "%":d=100;h="%";m="f";break;case "p":d=100;h="%";m="r";break;case "d":i=true;j=0;break;case "s":d=-1;m="r"}m=="r"&&!j&&(m="g");m=te.get(m)||J;return function(a){if(i&&a%1)return"";var C=a<0&&(a=-a)?"-":c;if(d<0){var t=d3.formatPrefix(a,j),a=t.scale(a);h=t.symbol}else a=a*d;a=m(a,j);if(e){t=a.length+C.length;t<f&&(a=Array(f-t+1).join(b)+a);g&&(a=B(a));a=C+a}else{g&&(a=B(a));a=C+a;t=a.length;t<f&&(a=Array(f-t+1).join(b)+a)}return a+h}};var se=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,
te=d3.map({g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return d3.round(a,b=E(a,b)).toFixed(Math.max(0,Math.min(20,b)))}}),ue="y,z,a,f,p,n,\u03bc,m,,k,M,G,T,P,E,Z,Y".split(",").map(function(a,b){var c=Math.pow(10,Math.abs(8-b)*3);return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}});d3.formatPrefix=function(a,b){var c=0;if(a){a<0&&(a=a*-1);b&&(a=d3.round(a,E(a,b)));c=1+Math.floor(1.0E-12+
Math.log(a)/Math.LN10);c=Math.max(-24,Math.min(24,Math.floor((c<=0?c+1:c-1)/3)*3))}return ue[8+c/3]};var ve=U(2),we=U(3),jd=function(){return S},xe=d3.map({linear:jd,poly:U,quad:function(){return ve},cubic:function(){return we},sin:function(){return H},exp:function(){return za},circle:function(){return Fa},elastic:function(a,b){var c;arguments.length<2&&(b=0.45);if(arguments.length<1){a=1;c=b/4}else c=b/(2*Math.PI)*Math.asin(1/a);return function(e){return 1+a*Math.pow(2,10*-e)*Math.sin((e-c)*2*Math.PI/
b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return sb}}),ye=d3.map({"in":S,out:M,"in-out":I,"out-in":function(a){return I(M(a))}});d3.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,b=b>=0?a.substring(b+1):"in",c=xe.get(c)||jd,b=ye.get(b)||S;return v(b(c.apply(null,Array.prototype.slice.call(arguments,1))))};d3.event=null;d3.transform=function(a){var b=document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(a){b.setAttribute("transform",
a);a=b.transform.baseVal.consolidate();return new W(a?a.matrix:ze)})(a)};W.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Yb=180/Math.PI,ze={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolate=function(a,b){for(var c=d3.interpolators.length,e;--c>=0&&!(e=d3.interpolators[c](a,b)););return e};d3.interpolateNumber=function(a,b){b=b-a;return function(c){return a+b*c}};d3.interpolateRound=function(a,b){b=b-a;return function(c){return Math.round(a+
b*c)}};d3.interpolateString=function(a,b){var c,e,f=0,g=[],j=[],m,d;for(e=mb.lastIndex=0;c=mb.exec(b);++e){c.index&&g.push(b.substring(f,c.index));j.push({i:g.length,x:c[0]});g.push(null);f=mb.lastIndex}f<b.length&&g.push(b.substring(f));e=0;for(m=j.length;(c=mb.exec(a))&&e<m;++e){d=j[e];if(d.x==c[0]){if(d.i)if(g[d.i+1]==null){g[d.i-1]=g[d.i-1]+d.x;g.splice(d.i,1);for(c=e+1;c<m;++c)j[c].i--}else{g[d.i-1]=g[d.i-1]+(d.x+g[d.i+1]);g.splice(d.i,2);for(c=e+1;c<m;++c)j[c].i=j[c].i-2}else if(g[d.i+1]==null)g[d.i]=
d.x;else{g[d.i]=d.x+g[d.i+1];g.splice(d.i+1,1);for(c=e+1;c<m;++c)j[c].i--}j.splice(e,1);m--;e--}else d.x=d3.interpolateNumber(parseFloat(c[0]),parseFloat(d.x))}for(;e<m;){d=j.pop();if(g[d.i+1]==null)g[d.i]=d.x;else{g[d.i]=d.x+g[d.i+1];g.splice(d.i+1,1)}m--}return g.length===1?g[0]==null?j[0].x:function(){return b}:function(a){for(e=0;e<m;++e)g[(d=j[e]).i]=d.x(a);return g.join("")}};d3.interpolateTransform=function(a,b){var c=[],e=[],f,g=d3.transform(a),j=d3.transform(b),m=g.translate,d=j.translate,
h=g.rotate,i=j.rotate,z=g.skew,C=j.skew,g=g.scale,j=j.scale;if(m[0]!=d[0]||m[1]!=d[1]){c.push("translate(",null,",",null,")");e.push({i:1,x:d3.interpolateNumber(m[0],d[0])},{i:3,x:d3.interpolateNumber(m[1],d[1])})}else d[0]||d[1]?c.push("translate("+d+")"):c.push("");if(h!=i){h-i>180?i=i+360:i-h>180&&(h=h+360);e.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(h,i)})}else i&&c.push(c.pop()+"rotate("+i+")");z!=C?e.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(z,
C)}):C&&c.push(c.pop()+"skewX("+C+")");if(g[0]!=j[0]||g[1]!=j[1]){f=c.push(c.pop()+"scale(",null,",",null,")");e.push({i:f-4,x:d3.interpolateNumber(g[0],j[0])},{i:f-2,x:d3.interpolateNumber(g[1],j[1])})}else(j[0]!=1||j[1]!=1)&&c.push(c.pop()+"scale("+j+")");f=e.length;return function(a){for(var b=-1,g;++b<f;)c[(g=e[b]).i]=g.x(a);return c.join("")}};d3.interpolateRgb=function(a,b){var a=d3.rgb(a),b=d3.rgb(b),c=a.r,e=a.g,f=a.b,g=b.r-c,j=b.g-e,m=b.b-f;return function(a){return"#"+L(Math.round(c+g*a))+
L(Math.round(e+j*a))+L(Math.round(f+m*a))}};d3.interpolateHsl=function(a,b){var a=d3.hsl(a),b=d3.hsl(b),c=a.h,e=a.s,f=a.l,g=b.h-c,j=b.s-e,m=b.l-f;g>180?g=g-360:g<-180&&(g=g+360);return function(a){return Ba(c+g*a,e+j*a,f+m*a)+""}};d3.interpolateLab=function(a,b){var a=d3.lab(a),b=d3.lab(b),c=a.l,e=a.a,f=a.b,g=b.l-c,j=b.a-e,m=b.b-f;return function(a){return aa(c+g*a,e+j*a,f+m*a)+""}};d3.interpolateHcl=function(a,b){var a=d3.hcl(a),b=d3.hcl(b),c=a.h,e=a.c,f=a.l,g=b.h-c,j=b.c-e,m=b.l-f;g>180?g=g-360:
g<-180&&(g=g+360);return function(a){return ha(c+g*a,e+j*a,f+m*a)+""}};d3.interpolateArray=function(a,b){var c=[],e=[],f=a.length,g=b.length,j=Math.min(a.length,b.length),m;for(m=0;m<j;++m)c.push(d3.interpolate(a[m],b[m]));for(;m<f;++m)e[m]=a[m];for(;m<g;++m)e[m]=b[m];return function(a){for(m=0;m<j;++m)e[m]=c[m](a);return e}};d3.interpolateObject=function(a,b){var c={},e={},f;for(f in a)f in b?c[f]=ca(f)(a[f],b[f]):e[f]=a[f];for(f in b)f in a||(e[f]=b[f]);return function(a){for(f in c)e[f]=c[f](a);
return e}};var mb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(a,b){return b instanceof Array&&d3.interpolateArray(a,b)},function(a,b){return(typeof a==="string"||typeof b==="string")&&d3.interpolateString(a+"",b+"")},function(a,b){return(typeof b==="string"?Ua.has(b)||/^(#|rgb\(|hsl\()/.test(b):b instanceof da||b instanceof fa)&&d3.interpolateRgb(a,b)},function(a,b){return!isNaN(a=+a)&&!isNaN(b=+b)&&d3.interpolateNumber(a,b)}];d3.rgb=function(a,b,
c){return arguments.length===1?a instanceof da?T(a.r,a.g,a.b):oa(""+a,T,Ba):T(~~a,~~b,~~c)};da.prototype.brighter=function(a){var a=Math.pow(0.7,arguments.length?a:1),b=this.r,c=this.g,e=this.b;if(!b&&!c&&!e)return T(30,30,30);b&&b<30&&(b=30);c&&c<30&&(c=30);e&&e<30&&(e=30);return T(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(e/a)))};da.prototype.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return T(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*
this.b))};da.prototype.hsl=function(){return Ja(this.r,this.g,this.b)};da.prototype.toString=function(){return"#"+L(this.r)+L(this.g)+L(this.b)};var Ua=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",
cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",
dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",
lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",
mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",
powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",
yellow:"#ffff00",yellowgreen:"#9acd32"});Ua.forEach(function(a,b){Ua.set(a,oa(b,T,Ba))});d3.hsl=function(a,b,c){return arguments.length===1?a instanceof fa?N(a.h,a.s,a.l):oa(""+a,Ja,N):N(+a,+b,+c)};fa.prototype.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);return N(this.h,this.s,this.l/a)};fa.prototype.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return N(this.h,this.s,a*this.l)};fa.prototype.rgb=function(){return Ba(this.h,this.s,this.l)};fa.prototype.toString=function(){return this.rgb().toString()};
d3.hcl=function(a,b,c){return arguments.length===1?a instanceof ga?X(a.h,a.c,a.l):a instanceof Z?la(a.l,a.a,a.b):la((a=Va((a=d3.rgb(a)).r,a.g,a.b)).l,a.a,a.b):X(+a,+b,+c)};ga.prototype.brighter=function(a){return X(this.h,this.c,Math.min(100,this.l+nb*(arguments.length?a:1)))};ga.prototype.darker=function(a){return X(this.h,this.c,Math.max(0,this.l-nb*(arguments.length?a:1)))};ga.prototype.rgb=function(){return ha(this.h,this.c,this.l).rgb()};ga.prototype.toString=function(){return this.rgb()+""};
d3.lab=function(a,b,c){return arguments.length===1?a instanceof Z?ea(a.l,a.a,a.b):a instanceof ga?ha(a.l,a.c,a.h):Va((a=d3.rgb(a)).r,a.g,a.b):ea(+a,+b,+c)};var nb=18,Zb=0.95047,$b=1,ac=1.08883;Z.prototype.brighter=function(a){return ea(Math.min(100,this.l+nb*(arguments.length?a:1)),this.a,this.b)};Z.prototype.darker=function(a){return ea(Math.max(0,this.l-nb*(arguments.length?a:1)),this.a,this.b)};Z.prototype.rgb=function(){return aa(this.l,this.a,this.b)};Z.prototype.toString=function(){return this.rgb()+
""};var Wa=function(a,b){return b.querySelector(a)},dc=function(a,b){return b.querySelectorAll(a)},Ea=document.documentElement,Ae=Ea.matchesSelector||Ea.webkitMatchesSelector||Ea.mozMatchesSelector||Ea.msMatchesSelector||Ea.oMatchesSelector,kc=function(a,b){return Ae.call(a,b)};"function"===typeof Sizzle&&(Wa=function(a,b){return Sizzle(a,b)[0]||null},dc=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},kc=Sizzle.matchesSelector);var F=[];d3.selection=function(){return Ta};d3.selection.prototype=
F;F.select=function(a){var b=[],c,e,f,g;typeof a!=="function"&&(a=bc(a));for(var j=-1,m=this.length;++j<m;){b.push(c=[]);c.parentNode=(f=this[j]).parentNode;for(var d=-1,h=f.length;++d<h;)if(g=f[d]){c.push(e=a.call(g,g.__data__,d));if(e&&"__data__"in g)e.__data__=g.__data__}else c.push(null)}return ia(b)};F.selectAll=function(a){var b=[],c,e;typeof a!=="function"&&(a=cc(a));for(var f=-1,g=this.length;++f<g;)for(var j=this[f],m=-1,d=j.length;++m<d;)if(e=j[m]){b.push(c=Ra(a.call(e,e.__data__,m)));c.parentNode=
e}return ia(b)};F.attr=function(a,b){if(arguments.length<2){if(typeof a==="string"){var c=this.node(),a=d3.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(ec(b,a[b]));return this}return this.each(ec(a,b))};F.classed=function(a,b){if(arguments.length<2){if(typeof a==="string"){var c=this.node(),e=(a=a.trim().split(/^|\s+/g)).length,f=-1;if(b=c.classList)for(;++f<e;){if(!b.contains(a[f]))return false}else{b=c.className;if(b.baseVal!=null)b=b.baseVal;
for(;++f<e;)if(!fc(a[f]).test(b))return false}return true}for(b in a)this.each(gc(b,a[b]));return this}return this.each(gc(a,b))};F.style=function(a,b,c){var e=arguments.length;if(e<3){if(typeof a!=="string"){e<2&&(b="");for(c in a)this.each(hc(c,a[c],b));return this}if(e<2)return window.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(hc(a,b,c))};F.property=function(a,b){if(arguments.length<2){if(typeof a==="string")return this.node()[a];for(b in a)this.each(ic(b,a[b]));
return this}return this.each(ic(a,b))};F.text=function(a){return arguments.length<1?this.node().textContent:this.each(typeof a==="function"?function(){var b=a.apply(this,arguments);this.textContent=b==null?"":b}:a==null?function(){this.textContent=""}:function(){this.textContent=a})};F.html=function(a){return arguments.length<1?this.node().innerHTML:this.each(typeof a==="function"?function(){var b=a.apply(this,arguments);this.innerHTML=b==null?"":b}:a==null?function(){this.innerHTML=""}:function(){this.innerHTML=
a})};F.append=function(a){function b(){return this.appendChild(document.createElementNS(this.namespaceURI,a))}function c(){return this.appendChild(document.createElementNS(a.space,a.local))}a=d3.ns.qualify(a);return this.select(a.local?c:b)};F.insert=function(a,b){function c(){return this.insertBefore(document.createElementNS(this.namespaceURI,a),Wa(b,this))}function e(){return this.insertBefore(document.createElementNS(a.space,a.local),Wa(b,this))}a=d3.ns.qualify(a);return this.select(a.local?e:
c)};F.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};F.data=function(a,b){function c(a,c){var e,f=a.length,g=c.length,j=Math.min(f,g),i=Math.max(f,g),l=[],A=[],n=[],p,G;if(b){var j=new k,i=[],D;G=c.length;for(e=-1;++e<f;){D=b.call(p=a[e],p.__data__,e);j.has(D)?n[G++]=p:j.set(D,p);i.push(D)}for(e=-1;++e<g;){D=b.call(c,G=c[e],e);if(j.has(D)){l[e]=p=j.get(D);p.__data__=G;A[e]=n[e]=null}else{A[e]={__data__:G};l[e]=n[e]=null}j.remove(D)}for(e=-1;++e<f;)j.has(i[e])&&
(n[e]=a[e])}else{for(e=-1;++e<j;){p=a[e];G=c[e];if(p){p.__data__=G;l[e]=p;A[e]=n[e]=null}else{A[e]={__data__:G};l[e]=n[e]=null}}for(;e<g;++e){A[e]={__data__:c[e]};l[e]=n[e]=null}for(;e<i;++e){n[e]=a[e];A[e]=l[e]=null}}A.update=l;A.parentNode=l.parentNode=n.parentNode=a.parentNode;m.push(A);d.push(l);h.push(n)}var e=-1,f=this.length,g,j;if(!arguments.length){for(a=Array(f=(g=this[0]).length);++e<f;)if(j=g[e])a[e]=j.__data__;return a}var m=mc([]),d=ia([]),h=ia([]);if(typeof a==="function")for(;++e<
f;)c(g=this[e],a.call(g,g.parentNode.__data__,e));else for(;++e<f;)c(g=this[e],a);d.enter=function(){return m};d.exit=function(){return h};return d};F.datum=F.map=function(a){return arguments.length<1?this.property("__data__"):this.property("__data__",a)};F.filter=function(a){var b=[],c,e,f;typeof a!=="function"&&(a=jc(a));for(var g=0,j=this.length;g<j;g++){b.push(c=[]);c.parentNode=(e=this[g]).parentNode;for(var m=0,d=e.length;m<d;m++)(f=e[m])&&a.call(f,f.__data__,m)&&c.push(f)}return ia(b)};F.order=
function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],e=c.length-1,f=c[e],g;--e>=0;)if(g=c[e]){f&&f!==g.nextSibling&&f.parentNode.insertBefore(g,f);f=g}return this};F.sort=function(a){for(var a=yd.apply(this,arguments),b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};F.on=function(a,b,c){var e=arguments.length;if(e<3){if(typeof a!=="string"){e<2&&(b=false);for(c in a)this.each(lc(c,a[c],b));return this}if(e<2)return(e=this.node()["__on"+a])&&e._;c=false}return this.each(lc(a,
b,c))};F.each=function(a){return na(this,function(b,c,e){a.call(b,b.__data__,c,e)})};F.call=function(a){a.apply(this,(arguments[0]=this,arguments));return this};F.empty=function(){return!this.node()};F.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],e=0,f=c.length;e<f;e++){var g=c[e];if(g)return g}return null};F.transition=function(){for(var a=[],b,c,e=-1,f=this.length;++e<f;){a.push(b=[]);for(var g=this[e],j=-1,m=g.length;++j<m;)b.push((c=g[j])?{node:c,delay:Za,duration:$a}:null)}return Xa(a,
ta||++Be,Date.now())};var Ta=ia([[document]]);Ta[0].parentNode=Ea;d3.select=function(a){return typeof a==="string"?Ta.select(a):ia([[a]])};d3.selectAll=function(a){return typeof a==="string"?Ta.selectAll(a):ia([Ra(a)])};var sa=[];d3.selection.enter=mc;d3.selection.enter.prototype=sa;sa.append=F.append;sa.insert=F.insert;sa.empty=F.empty;sa.node=F.node;sa.select=function(a){for(var b=[],c,e,f,g,j,m=-1,d=this.length;++m<d;){f=(g=this[m]).update;b.push(c=[]);c.parentNode=g.parentNode;for(var h=-1,i=
g.length;++h<i;)if(j=g[h]){c.push(f[h]=e=a.call(g.parentNode,j.__data__,h));e.__data__=j.__data__}else c.push(null)}return ia(b)};var R=[],Be=0,ta=0,Za=0,$a=250,Ya=d3.ease("cubic-in-out");R.call=F.call;d3.transition=function(a){return arguments.length?ta?a.transition():a:Ta.transition()};d3.transition.prototype=R;R.select=function(a){var b=[],c,e,f;typeof a!=="function"&&(a=bc(a));for(var g=-1,j=this.length;++g<j;){b.push(c=[]);for(var m=this[g],d=-1,h=m.length;++d<h;)if((f=m[d])&&(e=a.call(f.node,
f.node.__data__,d))){if("__data__"in f.node)e.__data__=f.node.__data__;c.push({node:e,delay:f.delay,duration:f.duration})}else c.push(null)}return Xa(b,this.id,this.time).ease(this.ease())};R.selectAll=function(a){var b=[],c,e,f;typeof a!=="function"&&(a=cc(a));for(var g=-1,j=this.length;++g<j;)for(var m=this[g],d=-1,h=m.length;++d<h;)if(f=m[d]){e=a.call(f.node,f.node.__data__,d);b.push(c=[]);for(var i=-1,z=e.length;++i<z;)c.push({node:e[i],delay:f.delay,duration:f.duration})}return Xa(b,this.id,
this.time).ease(this.ease())};R.filter=function(a){var b=[],c,e,f;typeof a!=="function"&&(a=jc(a));for(var g=0,j=this.length;g<j;g++){b.push(c=[]);e=this[g];for(var m=0,d=e.length;m<d;m++)(f=e[m])&&a.call(f.node,f.node.__data__,m)&&c.push(f)}return Xa(b,this.id,this.time).ease(this.ease())};R.attr=function(a,b){if(arguments.length<2){for(b in a)this.attrTween(b,d3.tween(a[b],ca(b)));return this}return this.attrTween(a,d3.tween(b,ca(a)))};R.attrTween=function(a,b){function c(a,c){var e=b.call(this,
a,c,this.getAttribute(f));return e===Ma?(this.removeAttribute(f),null):e&&function(a){this.setAttribute(f,e(a))}}function e(a,c){var e=b.call(this,a,c,this.getAttributeNS(f.space,f.local));return e===Ma?(this.removeAttributeNS(f.space,f.local),null):e&&function(a){this.setAttributeNS(f.space,f.local,e(a))}}var f=d3.ns.qualify(a);return this.tween("attr."+a,f.local?e:c)};R.style=function(a,b,c){var e=arguments.length;if(e<3){if(typeof a!=="string"){e<2&&(b="");for(c in a)this.styleTween(c,d3.tween(a[c],
ca(c)),b);return this}c=""}return this.styleTween(a,d3.tween(b,ca(a)),c)};R.styleTween=function(a,b,c){arguments.length<3&&(c="");return this.tween("style."+a,function(e,f){var g=b.call(this,e,f,window.getComputedStyle(this,null).getPropertyValue(a));return g===Ma?(this.style.removeProperty(a),null):g&&function(b){this.style.setProperty(a,g(b),c)}})};R.text=function(a){return this.tween("text",function(b,c){this.textContent=typeof a==="function"?a.call(this,b,c):a})};R.remove=function(){return this.each("end.transition",
function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};R.delay=function(a){return na(this,typeof a==="function"?function(b,c,e){b.delay=a.call(b=b.node,b.__data__,c,e)|0}:(a=a|0,function(b){b.delay=a}))};R.duration=function(a){return na(this,typeof a==="function"?function(b,c,e){b.duration=Math.max(1,a.call(b=b.node,b.__data__,c,e)|0)}:(a=Math.max(1,a|0),function(b){b.duration=a}))};R.transition=function(){return this.select(i)};d3.tween=function(a,b){function c(c,e,j){c=
a.call(this,c,e);return c==null?j!=""&&Ma:j!=c&&b(j,c)}function e(c,e,j){return j!=a&&b(j,a)}return typeof a==="function"?c:a==null?Ad:(a=a+"",e)};var Ma={},ua=null,bb,ab;d3.timer=function(a,b,c){var e=false,f=ua;if(arguments.length<3){if(arguments.length<2)b=0;else if(!isFinite(b))return;c=Date.now()}for(;f;){if(f.callback===a){f.then=c;f.delay=b;e=true;break}f=f.next}e||(ua={callback:a,then:c,delay:b,next:ua});if(!bb){ab=clearTimeout(ab);bb=1;oc(wb)}};d3.timer.flush=function(){for(var a,b=Date.now(),
c=ua;c;){a=b-c.then;if(!c.delay)c.flush=c.callback(a);c=c.next}nc()};var oc=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};d3.mouse=function(a){return pc(a,Ga())};var xb=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(a,b){if(arguments.length<2)b=Ga().touches;return b?Ra(b).map(function(b){var e=pc(a,b);e.identifier=b.identifier;return e}):[]};
d3.scale={};d3.scale.linear=function(){return qc([0,1],[0,1],d3.interpolate,false)};d3.scale.log=function(){return uc(d3.scale.linear(),Ab)};var Ed=d3.format(".0e");Ab.pow=function(a){return Math.pow(10,a)};eb.pow=function(a){return-Math.pow(10,-a)};d3.scale.pow=function(){return vc(d3.scale.linear(),1)};d3.scale.sqrt=function(){return d3.scale.pow().exponent(0.5)};d3.scale.ordinal=function(){return wc([],{t:"range",a:[[]]})};d3.scale.category10=function(){return d3.scale.ordinal().range(Ce)};d3.scale.category20=
function(){return d3.scale.ordinal().range(De)};d3.scale.category20b=function(){return d3.scale.ordinal().range(Ee)};d3.scale.category20c=function(){return d3.scale.ordinal().range(Fe)};var Ce="#1f77b4,#ff7f0e,#2ca02c,#d62728,#9467bd,#8c564b,#e377c2,#7f7f7f,#bcbd22,#17becf".split(","),De="#1f77b4,#aec7e8,#ff7f0e,#ffbb78,#2ca02c,#98df8a,#d62728,#ff9896,#9467bd,#c5b0d5,#8c564b,#c49c94,#e377c2,#f7b6d2,#7f7f7f,#c7c7c7,#bcbd22,#dbdb8d,#17becf,#9edae5".split(","),Ee="#393b79,#5254a3,#6b6ecf,#9c9ede,#637939,#8ca252,#b5cf6b,#cedb9c,#8c6d31,#bd9e39,#e7ba52,#e7cb94,#843c39,#ad494a,#d6616b,#e7969c,#7b4173,#a55194,#ce6dbd,#de9ed6".split(","),
Fe="#3182bd,#6baed6,#9ecae1,#c6dbef,#e6550d,#fd8d3c,#fdae6b,#fdd0a2,#31a354,#74c476,#a1d99b,#c7e9c0,#756bb1,#9e9ac8,#bcbddc,#dadaeb,#636363,#969696,#bdbdbd,#d9d9d9".split(",");d3.scale.quantile=function(){return xc([],[])};d3.scale.quantize=function(){return yc(0,1,[0,1])};d3.scale.threshold=function(){return zc([0.5],[0,1])};d3.scale.identity=function(){return Ac([0,1])};d3.svg={};d3.svg.arc=function(){function a(){var a=b.apply(this,arguments),j=c.apply(this,arguments),m=e.apply(this,arguments)+
va,d=f.apply(this,arguments)+va,h=(d<m&&(h=m,m=d,d=h),d-m),i=h<Math.PI?"0":"1",z=Math.cos(m),m=Math.sin(m),k=Math.cos(d),d=Math.sin(d);return h>=Ge?a?"M0,"+j+"A"+j+","+j+" 0 1,1 0,"+-j+"A"+j+","+j+" 0 1,1 0,"+j+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+j+"A"+j+","+j+" 0 1,1 0,"+-j+"A"+j+","+j+" 0 1,1 0,"+j+"Z":a?"M"+j*z+","+j*m+"A"+j+","+j+" 0 "+i+",1 "+j*k+","+j*d+"L"+a*k+","+a*d+"A"+a+","+a+" 0 "+i+",0 "+a*z+","+a*m+"Z":"M"+j*z+","+j*m+"A"+j+","+j+" 0 "+i+",1 "+j*k+
","+j*d+"L0,0Z"}var b=Fd,c=Gd,e=Bc,f=Cc;a.innerRadius=function(c){if(!arguments.length)return b;b=l(c);return a};a.outerRadius=function(b){if(!arguments.length)return c;c=l(b);return a};a.startAngle=function(b){if(!arguments.length)return e;e=l(b);return a};a.endAngle=function(b){if(!arguments.length)return f;f=l(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,j=(e.apply(this,arguments)+f.apply(this,arguments))/2+va;return[Math.cos(j)*a,Math.sin(j)*a]};
return a};var va=-Math.PI/2,Ge=2*Math.PI-1.0E-6;d3.svg.line=function(){return Dc(h)};var Cb=d3.map({linear:V,"linear-closed":function(a){return V(a)+"Z"},"step-before":Db,"step-after":Eb,basis:Fc,"basis-open":function(a){if(a.length<4)return V(a);for(var b=[],c=-1,e=a.length,f,g=[0],j=[0];++c<3;){f=a[c];g.push(f[0]);j.push(f[1])}b.push(ba(Da,g)+","+ba(Da,j));for(--c;++c<e;){f=a[c];g.shift();g.push(f[0]);j.shift();j.push(f[1]);Oa(b,g,j)}return b.join("")},"basis-closed":function(a){for(var b,c=-1,
e=a.length,f=e+4,g,j=[],d=[];++c<4;){g=a[c%e];j.push(g[0]);d.push(g[1])}b=[ba(Da,j),",",ba(Da,d)];for(--c;++c<f;){g=a[c%e];j.shift();j.push(g[0]);d.shift();d.push(g[1]);Oa(b,j,d)}return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var e=a[0][0],f=a[0][1],g=a[c][0]-e,j=a[c][1]-f,d=-1,h,i;++d<=c;){h=a[d];i=d/c;h[0]=b*h[0]+(1-b)*(e+i*g);h[1]=b*h[1]+(1-b)*(f+i*j)}return Fc(a)},cardinal:function(a,b){return a.length<3?V(a):a[0]+gb(a,Fb(a,b))},"cardinal-open":function(a,b){return a.length<
4?V(a):a[1]+gb(a.slice(1,a.length-1),Fb(a,b))},"cardinal-closed":function(a,b){return a.length<3?V(a):a[0]+gb((a.push(a[0]),a),Fb([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(a.length<3)a=V(a);else{var b=a[0],c=[],e,f,g,j;e=0;f=a.length-1;var d=[];g=a[1];for(j=d[0]=Gb(a[0],g);++e<f;)d[e]=(j+(j=Gb(g,g=a[e+1])))/2;d[e]=j;for(var h=-1,i=a.length-1;++h<i;){e=Gb(a[h],a[h+1]);if(Math.abs(e)<1.0E-6)d[h]=d[h+1]=0;else{f=d[h]/e;g=d[h+1]/e;j=f*f+g*g;if(j>9){j=e*3/Math.sqrt(j);d[h]=j*f;d[h+
1]=j*g}}}for(h=-1;++h<=i;){j=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+d[h]*d[h]));c.push([j||0,d[h]*j||0])}a=b+gb(a,c)}return a}});Cb.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Gc=[0,2/3,1/3,0],Hc=[0,1/3,2/3,0],Da=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=Dc(Ic);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Db.reverse=Eb;Eb.reverse=Db;d3.svg.area=function(){return Jc(h)};d3.svg.area.radial=function(){var a=Jc(Ic);a.radius=a.x;delete a.x;a.innerRadius=
a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};d3.svg.chord=function(){function a(a,f){var g=b(this,c,a,f),j=b(this,e,a,f);return"M"+g.p0+("A"+g.r+","+g.r+" 0 "+ +(g.a1-g.a0>Math.PI)+",1 "+g.p1)+(g.a0==j.a0&&g.a1==j.a1?"Q 0,0 "+g.p0:"Q 0,0 "+j.p0+("A"+j.r+","+j.r+" 0 "+ +(j.a1-j.a0>Math.PI)+",1 "+j.p1)+("Q 0,0 "+g.p0))+"Z"}function b(a,b,c,e){var d=b.call(a,c,e),b=f.call(a,d,e),c=g.call(a,d,e)+va,a=j.call(a,
d,e)+va;return{r:b,a0:c,a1:a,p0:[b*Math.cos(c),b*Math.sin(c)],p1:[b*Math.cos(a),b*Math.sin(a)]}}var c=Kc,e=Lc,f=Hd,g=Bc,j=Cc;a.radius=function(b){if(!arguments.length)return f;f=l(b);return a};a.source=function(b){if(!arguments.length)return c;c=l(b);return a};a.target=function(b){if(!arguments.length)return e;e=l(b);return a};a.startAngle=function(b){if(!arguments.length)return g;g=l(b);return a};a.endAngle=function(b){if(!arguments.length)return j;j=l(b);return a};return a};d3.svg.diagonal=function(){function a(a,
g){var j=b.call(this,a,g),d=c.call(this,a,g),h=(j.y+d.y)/2,j=[j,{x:j.x,y:h},{x:d.x,y:h},d],j=j.map(e);return"M"+j[0]+"C"+j[1]+" "+j[2]+" "+j[3]}var b=Kc,c=Lc,e=Mc;a.source=function(c){if(!arguments.length)return b;b=l(c);return a};a.target=function(b){if(!arguments.length)return c;c=l(b);return a};a.projection=function(b){if(!arguments.length)return e;e=b;return a};return a};d3.svg.diagonal.radial=function(){var a=d3.svg.diagonal(),b=Mc,c=a.projection;a.projection=function(a){return arguments.length?
c(Id(b=a)):b};return a};d3.svg.mouse=d3.mouse;d3.svg.touches=d3.touches;d3.svg.symbol=function(){function a(a,f){return(kd.get(b.call(this,a,f))||Nc)(c.call(this,a,f))}var b=Kd,c=Jd;a.type=function(c){if(!arguments.length)return b;b=l(c);return a};a.size=function(b){if(!arguments.length)return c;c=l(b);return a};return a};var kd=d3.map({circle:Nc,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){var a=
Math.sqrt(a/(2*ld)),b=a*ld;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){var a=Math.sqrt(a/ob),b=a*ob/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){var a=Math.sqrt(a/ob),b=a*ob/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});d3.svg.symbolTypes=kd.keys();var ob=Math.sqrt(3),ld=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function a(a){a.each(function(){var a=
d3.select(this),t=h==null?b.ticks?b.ticks.apply(b,d):b.domain():h,z=i==null?b.tickFormat?b.tickFormat.apply(b,d):String:i,y=Ld(b,t,k),K=a.selectAll(".minor").data(y,String),y=K.enter().insert("line","g").attr("class","tick minor").style("opacity",1.0E-6),l=d3.transition(K.exit()).style("opacity",1.0E-6).remove(),K=d3.transition(K).style("opacity",1),A=a.selectAll("g").data(t,String),t=A.enter().insert("g","path").style("opacity",1.0E-6),n=d3.transition(A.exit()).style("opacity",1.0E-6).remove(),p=
d3.transition(A).style("opacity",1),G,D=cb(b),a=a.selectAll(".domain").data([0]);a.enter().append("path").attr("class","domain");var a=d3.transition(a),o=b.copy(),s=this.__chart__||o;this.__chart__=o;t.append("line").attr("class","tick");t.append("text");var r=t.select("line"),q=p.select("line"),z=A.select("text").text(z),A=t.select("text"),v=p.select("text");switch(c){case "bottom":G=Oc;y.attr("y2",f);K.attr("x2",0).attr("y2",f);r.attr("y2",e);A.attr("y",Math.max(e,0)+j);q.attr("x2",0).attr("y2",
e);v.attr("x",0).attr("y",Math.max(e,0)+j);z.attr("dy",".71em").attr("text-anchor","middle");a.attr("d","M"+D[0]+","+g+"V0H"+D[1]+"V"+g);break;case "top":G=Oc;y.attr("y2",-f);K.attr("x2",0).attr("y2",-f);r.attr("y2",-e);A.attr("y",-(Math.max(e,0)+j));q.attr("x2",0).attr("y2",-e);v.attr("x",0).attr("y",-(Math.max(e,0)+j));z.attr("dy","0em").attr("text-anchor","middle");a.attr("d","M"+D[0]+","+-g+"V0H"+D[1]+"V"+-g);break;case "left":G=Pc;y.attr("x2",-f);K.attr("x2",-f).attr("y2",0);r.attr("x2",-e);
A.attr("x",-(Math.max(e,0)+j));q.attr("x2",-e).attr("y2",0);v.attr("x",-(Math.max(e,0)+j)).attr("y",0);z.attr("dy",".32em").attr("text-anchor","end");a.attr("d","M"+-g+","+D[0]+"H0V"+D[1]+"H"+-g);break;case "right":G=Pc;y.attr("x2",f);K.attr("x2",f).attr("y2",0);r.attr("x2",e);A.attr("x",Math.max(e,0)+j);q.attr("x2",e).attr("y2",0);v.attr("x",Math.max(e,0)+j).attr("y",0);z.attr("dy",".32em").attr("text-anchor","start");a.attr("d","M"+g+","+D[0]+"H0V"+D[1]+"H"+g)}if(b.ticks){t.call(G,s);p.call(G,o);
n.call(G,o);y.call(G,s);K.call(G,o);l.call(G,o)}else{var x=o.rangeBand()/2,y=function(a){return o(a)+x};t.call(G,y);p.call(G,y)}})}var b=d3.scale.linear(),c="bottom",e=6,f=6,g=6,j=3,d=[10],h=null,i,k=0;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b;return a};a.ticks=function(){if(!arguments.length)return d;d=arguments;return a};a.tickValues=function(b){if(!arguments.length)return h;h=b;return a};a.tickFormat=function(b){if(!arguments.length)return i;
i=b;return a};a.tickSize=function(b,c,j){if(!arguments.length)return e;var d=arguments.length-1;e=+b;f=d>1?+c:e;g=d>0?+arguments[d]:e;return a};a.tickPadding=function(b){if(!arguments.length)return j;j=+b;return a};a.tickSubdivide=function(b){if(!arguments.length)return k;k=+b;return a};return a};d3.svg.brush=function(){function a(g){g.each(function(){var g=d3.select(this),i=g.selectAll(".background").data([0]),k=g.selectAll(".extent").data([0]),z=g.selectAll(".resize").data(h,String);g.style("pointer-events",
"all").on("mousedown.brush",f).on("touchstart.brush",f);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");k.enter().append("rect").attr("class","extent").style("cursor","move");z.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return He[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility",
"hidden");z.style("display",a.empty()?"none":null);z.exit().remove();if(j){k=cb(j);i.attr("x",k[0]).attr("width",k[1]-k[0]);c(g)}if(d){k=cb(d);i.attr("y",k[0]).attr("height",k[1]-k[0]);e(g)}b(g)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+i[+/e$/.test(a)][0]+","+i[+/^s/.test(a)][1]+")"})}function c(a){a.select(".extent").attr("x",i[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",i[1][0]-i[0][0])}function e(a){a.select(".extent").attr("y",i[0][1]);
a.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1][1]-i[0][1])}function f(){function f(){var a=d3.event.changedTouches;return a?d3.touches(y,a)[0]:d3.mouse(y)}function h(){var a=f(),g=false;if(v){a[0]=a[0]+v[0];a[1]=a[1]+v[1]}if(!D)if(d3.event.altKey){r||(r=[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]);q[0]=i[+(a[0]<r[0])][0];q[1]=i[+(a[1]<r[1])][1]}else r=null;if(o&&t(a,j,0)){c(A);g=true}if(s&&t(a,d,1)){e(A);g=true}if(g){b(A);n({type:"brush",mode:D?"move":"resize"})}}function t(a,b,c){var e=
cb(b),b=e[0],f=e[1],e=q[c],g=i[1][c]-i[0][c];if(D){b=b-e;f=f-(g+e)}a=Math.max(b,Math.min(f,a[c]));if(D)b=(a=a+e)+g;else{r&&(e=Math.max(b,Math.min(f,2*r[c]-a)));if(e<a){b=a;a=e}else b=e}if(i[0][c]!==a||i[1][c]!==b){k=null;i[0][c]=a;i[1][c]=b;return true}}function u(){h();A.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);d3.select("body").style("cursor",null);x.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",
null).on("keydown.brush",null).on("keyup.brush",null);n({type:"brushend"});Q()}var y=this,l=d3.select(d3.event.target),n=g.of(y,arguments),A=d3.select(y),p=l.datum(),o=!/^(n|s)$/.test(p)&&j,s=!/^(e|w)$/.test(p)&&d,D=l.classed("extent"),r,q=f(),v,x=d3.select(window).on("mousemove.brush",h).on("mouseup.brush",u).on("touchmove.brush",h).on("touchend.brush",u).on("keydown.brush",function(){if(d3.event.keyCode==32){if(!D){r=null;q[0]=q[0]-i[1][0];q[1]=q[1]-i[1][1];D=2}Q()}}).on("keyup.brush",function(){if(d3.event.keyCode==
32&&D==2){q[0]=q[0]+i[1][0];q[1]=q[1]+i[1][1];D=0;Q()}});if(D){q[0]=i[0][0]-q[0];q[1]=i[0][1]-q[1]}else if(p){var B=+/w$/.test(p),p=+/^n/.test(p);v=[i[1-B][0]-q[0],i[1-p][1]-q[1]];q[0]=i[B][0];q[1]=i[p][1]}else d3.event.altKey&&(r=q.slice());A.style("pointer-events","none").selectAll(".resize").style("display",null);d3.select("body").style("cursor",l.style("cursor"));n({type:"brushstart"});h();Q()}var g=Ha(a,"brushstart","brush","brushend"),j=null,d=null,h=Vb[0],i=[[0,0],[0,0]],k;a.x=function(b){if(!arguments.length)return j;
j=b;h=Vb[!j<<1|!d];return a};a.y=function(b){if(!arguments.length)return d;d=b;h=Vb[!j<<1|!d];return a};a.extent=function(b){var c,e,f,g,h;if(!arguments.length){b=k||i;if(j){c=b[0][0];e=b[1][0];if(!k){c=i[0][0];e=i[1][0];if(j.invert){c=j.invert(c);e=j.invert(e)}if(e<c){h=c;c=e;e=h}}}if(d){f=b[0][1];g=b[1][1];if(!k){f=i[0][1];g=i[1][1];if(d.invert){f=d.invert(f);g=d.invert(g)}if(g<f){h=f;f=g;g=h}}}return j&&d?[[c,f],[e,g]]:j?[c,e]:d&&[f,g]}k=[[0,0],[0,0]];if(j){c=b[0];e=b[1];if(d){c=c[0];e=e[0]}k[0][0]=
c;k[1][0]=e;if(j.invert){c=j(c);e=j(e)}if(e<c){h=c;c=e;e=h}i[0][0]=c|0;i[1][0]=e|0}if(d){f=b[0];g=b[1];if(j){f=f[1];g=g[1]}k[0][1]=f;k[1][1]=g;if(d.invert){f=d(f);g=d(g)}if(g<f){h=f;f=g;g=h}i[0][1]=f|0;i[1][1]=g|0}return a};a.clear=function(){k=null;i[0][0]=i[0][1]=i[1][0]=i[1][1]=0;return a};a.empty=function(){return j&&i[0][0]===i[1][0]||d&&i[0][1]===i[1][1]};return d3.rebind(a,g,"on")};var He={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",
sw:"nesw-resize"},Vb=["n,e,s,w,nw,ne,se,sw".split(","),["e","w"],["n","s"],[]];d3.behavior={};d3.behavior.drag=function(){function a(){this.on("mousedown.drag",b).on("touchstart.drag",b)}function b(){function a(){var b=h.parentNode,c=d3.event.changedTouches;return c?d3.touches(b,c)[0]:d3.mouse(b)}function b(){if(!h.parentNode)return j();var c=a(),e=c[0]-l[0],g=c[1]-l[1];t=t|e|g;l=c;Q();i({type:"drag",x:c[0]+z[0],y:c[1]+z[1],dx:e,dy:g})}function j(){i({type:"dragend"});if(t){Q();if(d3.event.target===
k)n.on("click.drag",d,true)}n.on("mousemove.drag",null).on("touchmove.drag",null).on("mouseup.drag",null).on("touchend.drag",null)}function d(){Q();n.on("click.drag",null)}var h=this,i=c.of(h,arguments),k=d3.event.target,z,l=a(),t=0,n=d3.select(window).on("mousemove.drag",b).on("touchmove.drag",b).on("mouseup.drag",j,true).on("touchend.drag",j,true);if(e){z=e.apply(h,arguments);z=[z.x-l[0],z.y-l[1]]}else z=[0,0];Q();i({type:"dragstart"})}var c=Ha(a,"drag","dragstart","dragend"),e=null;a.origin=function(b){if(!arguments.length)return e;
e=b;return a};return d3.rebind(a,c,"on")};d3.behavior.zoom=function(){function a(){this.on("mousedown.zoom",g).on("mousewheel.zoom",j).on("mousemove.zoom",d).on("DOMMouseScroll.zoom",j).on("dblclick.zoom",h).on("touchstart.zoom",i).on("touchmove.zoom",k).on("touchend.zoom",i)}function b(a){return[(a[0]-l[0])/t,(a[1]-l[1])/t]}function c(a){t=Math.max(y[0],Math.min(y[1],a))}function e(a,b){b=[b[0]*t+l[0],b[1]*t+l[1]];l[0]=l[0]+(a[0]-b[0]);l[1]=l[1]+(a[1]-b[1])}function f(a){A&&A.domain(o.range().map(function(a){return(a-
l[0])/t}).map(o.invert));s&&s.domain(q.range().map(function(a){return(a-l[1])/t}).map(q.invert));d3.event.preventDefault();a({type:"zoom",scale:t,translate:l})}function g(){function a(){Q();h.on("click.zoom",null)}var c=this,g=r.of(c,arguments),j=d3.event.target,d=0,h=d3.select(window).on("mousemove.zoom",function(){d=1;e(d3.mouse(c),i);f(g)}).on("mouseup.zoom",function(){d&&Q();h.on("mousemove.zoom",null).on("mouseup.zoom",null);if(d&&d3.event.target===j)h.on("click.zoom",a,true)}),i=b(d3.mouse(c));
window.focus();Q()}function j(){n||(n=b(d3.mouse(this)));c(Math.pow(2,Md()*0.002)*t);e(d3.mouse(this),n);f(r.of(this,arguments))}function d(){n=null}function h(){var a=d3.mouse(this),g=b(a);c(d3.event.shiftKey?t/2:t*2);e(a,g);f(r.of(this,arguments))}function i(){var a=d3.touches(this),g=Date.now();p=t;n={};a.forEach(function(a){n[a.identifier]=b(a)});Q();if(a.length===1){if(g-G<500){var j=a[0],a=b(a[0]);c(t*2);e(j,a);f(r.of(this,arguments))}G=g}}function k(){var a=d3.touches(this),b=a[0],g=n[b.identifier];
if(a=a[1]){var j=n[a.identifier],b=[(b[0]+a[0])/2,(b[1]+a[1])/2],g=[(g[0]+j[0])/2,(g[1]+j[1])/2];c(d3.event.scale*p)}e(b,g);G=null;f(r.of(this,arguments))}var l=[0,0],n,t=1,p,y=md,r=Ha(a,"zoom"),o,A,q,s,G;a.translate=function(b){if(!arguments.length)return l;l=b.map(Number);return a};a.scale=function(b){if(!arguments.length)return t;t=+b;return a};a.scaleExtent=function(b){if(!arguments.length)return y;y=b==null?md:b.map(Number);return a};a.x=function(b){if(!arguments.length)return A;A=b;o=b.copy();
return a};a.y=function(b){if(!arguments.length)return s;s=b;q=b.copy();return a};return d3.rebind(a,r,"on")};var Pa,md=[0,Infinity];d3.layout={};d3.layout.bundle=function(){return function(a){for(var b=[],c=-1,e=a.length;++c<e;)b.push(Nd(a[c]));return b}};d3.layout.chord=function(){function a(){var a={},c=[],t=d3.range(j),l=[],n,p,r,A,o;e=[];f=[];n=0;for(A=-1;++A<j;){p=0;for(o=-1;++o<j;)p=p+g[A][o];c.push(p);l.push(d3.range(j));n=n+p}h&&t.sort(function(a,b){return h(c[a],c[b])});i&&l.forEach(function(a,
b){a.sort(function(a,c){return i(g[b][a],g[b][c])})});n=(2*Math.PI-d*j)/n;p=0;for(A=-1;++A<j;){r=p;for(o=-1;++o<j;){var q=t[A],s=l[q][o],D=g[q][s],v=p,x=p=p+D*n;a[q+"-"+s]={index:q,subindex:s,startAngle:v,endAngle:x,value:D}}f[q]={index:q,startAngle:r,endAngle:p,value:(p-r)/n};p=p+d}for(A=-1;++A<j;)for(o=A-1;++o<j;){t=a[A+"-"+o];l=a[o+"-"+A];if(t.value||l.value)e.push(t.value<l.value?{source:l,target:t}:{source:t,target:l})}k&&b()}function b(){e.sort(function(a,b){return k((a.source.value+a.target.value)/
2,(b.source.value+b.target.value)/2)})}var c={},e,f,g,j,d=0,h,i,k;c.matrix=function(a){if(!arguments.length)return g;j=(g=a)&&g.length;e=f=null;return c};c.padding=function(a){if(!arguments.length)return d;d=a;e=f=null;return c};c.sortGroups=function(a){if(!arguments.length)return h;h=a;e=f=null;return c};c.sortSubgroups=function(a){if(!arguments.length)return i;i=a;e=null;return c};c.sortChords=function(a){if(!arguments.length)return k;k=a;e&&b();return c};c.chords=function(){e||a();return e};c.groups=
function(){f||a();return f};return c};d3.layout.force=function(){function a(a){return function(b,c,e,f){if(b.point!==a){var e=b.cx-a.x,g=b.cy-a.y,j=1/Math.sqrt(e*e+g*g);if((f-c)*j<o){c=b.charge*j*j;a.px=a.px-e*c;a.py=a.py-g*c;return true}if(b.point&&isFinite(j)){c=b.pointCharge*j*j;a.px=a.px-e*c;a.py=a.py-g*c}}return!b.charge}}function b(a){Rc(wa=a);Hb=c}var c={},e=d3.dispatch("start","tick","end"),f=[1,1],g,j,d=0.9,i=Rd,k=Sd,n=-30,p=0.1,o=0.8,t=[],r=[],q,s,v;c.tick=function(){if((j=j*0.99)<0.005){e.end({type:"end",
alpha:j=0});return true}var b=t.length,c=r.length,g,h,i,k,l,u,o;for(g=0;g<c;++g){h=r[g];i=h.source;k=h.target;u=k.x-i.x;o=k.y-i.y;if(l=u*u+o*o){l=j*s[g]*((l=Math.sqrt(l))-q[g])/l;u=u*l;o=o*l;k.x=k.x-u*(l=i.weight/(k.weight+i.weight));k.y=k.y-o*l;i.x=i.x+u*(l=1-l);i.y=i.y+o*l}}if(l=j*p){u=f[0]/2;o=f[1]/2;g=-1;if(l)for(;++g<b;){h=t[g];h.x=h.x+(u-h.x)*l;h.y=h.y+(o-h.y)*l}}if(n){Sc(c=d3.geom.quadtree(t),j,v);for(g=-1;++g<b;)(h=t[g]).fixed||c.visit(a(h))}for(g=-1;++g<b;){h=t[g];if(h.fixed){h.x=h.px;h.y=
h.py}else{h.x=h.x-(h.px-(h.px=h.x))*d;h.y=h.y-(h.py-(h.py=h.y))*d}}e.tick({type:"tick",alpha:j})};c.nodes=function(a){if(!arguments.length)return t;t=a;return c};c.links=function(a){if(!arguments.length)return r;r=a;return c};c.size=function(a){if(!arguments.length)return f;f=a;return c};c.linkDistance=function(a){if(!arguments.length)return i;i=l(a);return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return k;k=l(a);return c};c.friction=function(a){if(!arguments.length)return d;
d=a;return c};c.charge=function(a){if(!arguments.length)return n;n=typeof a==="function"?a:+a;return c};c.gravity=function(a){if(!arguments.length)return p;p=a;return c};c.theta=function(a){if(!arguments.length)return o;o=a;return c};c.alpha=function(a){if(!arguments.length)return j;if(j)j=a>0?a:0;else if(a>0){e.start({type:"start",alpha:j=a});d3.timer(c.tick)}return c};c.start=function(){function a(c,f){var d;if(!m){m=[];for(e=0;e<g;++e)m[e]=[];for(e=0;e<j;++e){d=r[e];m[d.source.index].push(d.target);
m[d.target.index].push(d.source)}}d=m[b];for(var h=-1,i=d.length,k;++h<i;)if(!isNaN(k=d[h][c]))return k;return Math.random()*f}var b,e,g=t.length,j=r.length,d=f[0],h=f[1],m,l;for(b=0;b<g;++b){(l=t[b]).index=b;l.weight=0}q=[];s=[];for(b=0;b<j;++b){l=r[b];if(typeof l.source=="number")l.source=t[l.source];if(typeof l.target=="number")l.target=t[l.target];q[b]=i.call(this,l,b);s[b]=k.call(this,l,b);++l.source.weight;++l.target.weight}for(b=0;b<g;++b){l=t[b];if(isNaN(l.x))l.x=a("x",d);if(isNaN(l.y))l.y=
a("y",h);if(isNaN(l.px))l.px=l.x;if(isNaN(l.py))l.py=l.y}v=[];if(typeof n==="function")for(b=0;b<g;++b)v[b]=+n.call(this,t[b],b);else for(b=0;b<g;++b)v[b]=n;return c.resume()};c.resume=function(){return c.alpha(0.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){g||(g=d3.behavior.drag().origin(h).on("dragstart",b).on("drag",Qd).on("dragend",Pd));this.on("mouseover.force",Rc).on("mouseout.force",Od).call(g)};return d3.rebind(c,e,"on")};var Hb,wa;d3.layout.partition=function(){function a(b,
c,e,f){var d=b.children;b.x=c;b.y=b.depth*f;b.dx=e;b.dy=f;if(d&&(i=d.length))for(var h=-1,i,k,e=b.value?e/b.value:0;++h<i;){a(k=d[h],c,b=k.value*e,f);c=c+b}}function b(a){var a=a.children,c=0;if(a&&(f=a.length))for(var e=-1,f;++e<f;)c=Math.max(c,b(a[e]));return 1+c}function c(c,j){var d=e.call(this,c,j);a(d[0],0,f[0],f[1]/b(d[0]));return d}var e=d3.layout.hierarchy(),f=[1,1];c.size=function(a){if(!arguments.length)return f;f=a;return c};return Qa(c,e)};d3.layout.pie=function(){function a(g,j){var d=
g.map(function(c,e){return+b.call(a,c,e)}),h=+(typeof e==="function"?e.apply(this,arguments):e),i=((typeof f==="function"?f.apply(this,arguments):f)-e)/d3.sum(d),k=d3.range(g.length);c!=null&&k.sort(c===nd?function(a,b){return d[b]-d[a]}:function(a,b){return c(g[a],g[b])});var l=[];k.forEach(function(a){var b;l[a]={data:g[a],value:b=d[a],startAngle:h,endAngle:h=h+b*i}});return l}var b=Number,c=nd,e=0,f=2*Math.PI;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;
c=b;return a};a.startAngle=function(b){if(!arguments.length)return e;e=b;return a};a.endAngle=function(b){if(!arguments.length)return f;f=b;return a};return a};var nd={};d3.layout.stack=function(){function a(d,h){var i=d.map(function(c,e){return b.call(a,c,e)}),k=i.map(function(b){return b.map(function(b,c){return[g.call(a,b,c),j.call(a,b,c)]})}),l=c.call(a,k,h),i=d3.permute(i,l),k=d3.permute(k,l),l=e.call(a,k,h),n=i.length,t=i[0].length,p,o,r;for(o=0;o<t;++o){f.call(a,i[0][o],r=l[o],k[0][o][1]);
for(p=1;p<n;++p)f.call(a,i[p][o],r=r+k[p-1][o][1],k[p][o][1])}return d}var b=h,c=Ib,e=Jb,f=Vd,g=Td,j=Ud;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return c;c=typeof b==="function"?b:Ie.get(b)||Ib;return a};a.offset=function(b){if(!arguments.length)return e;e=typeof b==="function"?b:Je.get(b)||Jb;return a};a.x=function(b){if(!arguments.length)return g;g=b;return a};a.y=function(b){if(!arguments.length)return j;j=b;return a};a.out=function(b){if(!arguments.length)return f;
f=b;return a};return a};var Ie=d3.map({"inside-out":function(a){for(var b=a.length,c,e=a.map(Wd),f=a.map(Xd),g=d3.range(b).sort(function(a,b){return e[a]-e[b]}),d=0,h=0,i=[],k=[],a=0;a<b;++a){c=g[a];if(d<h){d=d+f[c];i.push(c)}else{h=h+f[c];k.push(c)}}return k.reverse().concat(i)},reverse:function(a){return d3.range(a.length).reverse()},"default":Ib}),Je=d3.map({silhouette:function(a){var b=a.length,c=a[0].length,e=[],f=0,g,d,h,i=[];for(d=0;d<c;++d){for(h=g=0;g<b;g++)h=h+a[g][d][1];h>f&&(f=h);e.push(h)}for(d=
0;d<c;++d)i[d]=(f-e[d])/2;return i},wiggle:function(a){var b=a.length,c=a[0],e=c.length,f,g,d,h,i,k,l,n,p,t=[];t[0]=n=p=0;for(g=1;g<e;++g){for(h=f=0;f<b;++f)h=h+a[f][g][1];i=f=0;for(l=c[g][0]-c[g-1][0];f<b;++f){d=0;for(k=(a[f][g][1]-a[f][g-1][1])/(2*l);d<f;++d)k=k+(a[d][g][1]-a[d][g-1][1])/l;i=i+k*a[f][g][1]}t[g]=n=n-(h?i/h*l:0);n<p&&(p=n)}for(g=0;g<e;++g)t[g]=t[g]-p;return t},expand:function(a){var b=a.length,c=a[0].length,e=1/b,f,g,d,h=[];for(g=0;g<c;++g){for(d=f=0;f<b;f++)d=d+a[f][g][1];if(d)for(f=
0;f<b;f++)a[f][g][1]=a[f][g][1]/d;else for(f=0;f<b;f++)a[f][g][1]=e}for(g=0;g<c;++g)h[g]=0;return h},zero:Jb});d3.layout.histogram=function(){function a(a,d){for(var h=[],i=a.map(c,this),k=e.call(this,i,d),l=f.call(this,k,i,d),n,d=-1,p=i.length,t=l.length-1,o=b?1:1/p;++d<t;){n=h[d]=[];n.dx=l[d+1]-(n.x=l[d]);n.y=0}if(t>0)for(d=-1;++d<p;){n=i[d];if(n>=k[0]&&n<=k[1]){n=h[d3.bisect(l,n,1,t)-1];n.y=n.y+o;n.push(a[d])}}return h}var b=true,c=Number,e=$d,f=Zd;a.value=function(b){if(!arguments.length)return c;
c=b;return a};a.range=function(b){if(!arguments.length)return e;e=l(b);return a};a.bins=function(b){if(!arguments.length)return f;f=typeof b==="number"?function(a){return Tc(a,b)}:l(b);return a};a.frequency=function(c){if(!arguments.length)return b;b=!!c;return a};return a};d3.layout.hierarchy=function(){function a(b,d,h){var i=f.call(c,b,d),k=Kb?b:{data:b};k.depth=d;h.push(k);if(i&&(l=i.length)){for(var b=-1,l,n=k.children=[],p=0,d=d+1,o;++b<l;){o=a(i[b],d,h);o.parent=k;n.push(o);p=p+o.value}e&&
n.sort(e);if(g)k.value=p}else if(g)k.value=+g.call(c,b,d)||0;return k}function b(a,e){var f=a.children,d=0;if(f&&(i=f.length))for(var h=-1,i,k=e+1;++h<i;)d=d+b(f[h],k);else g&&(d=+g.call(c,Kb?a:a.data,e)||0);if(g)a.value=d;return d}function c(b){var c=[];a(b,0,c);return c}var e=de,f=be,g=ce;c.sort=function(a){if(!arguments.length)return e;e=a;return c};c.children=function(a){if(!arguments.length)return f;f=a;return c};c.value=function(a){if(!arguments.length)return g;g=a;return c};c.revalue=function(a){b(a,
0);return a};return c};var Kb=!1;d3.layout.pack=function(){function a(a,g){var d=b.call(this,a,g),h=d[0];h.x=0;h.y=0;ja(h,function(a){a.r=Math.sqrt(a.value)});ja(h,Wc);var i=e[0],k=e[1],l=Math.max(2*h.r/i,2*h.r/k);if(c>0){var n=c*l/2;ja(h,function(a){a.r=a.r+n});ja(h,Wc);ja(h,function(a){a.r=a.r-n});l=Math.max(2*h.r/i,2*h.r/k)}Yc(h,i/2,k/2,1/l);return d}var b=d3.layout.hierarchy().sort(ee),c=0,e=[1,1];a.size=function(b){if(!arguments.length)return e;e=b;return a};a.padding=function(b){if(!arguments.length)return c;
c=+b;return a};return Qa(a,b)};d3.layout.cluster=function(){function a(a,g){var d=b.call(this,a,g),h=d[0],i,k=0;ja(h,function(a){var b=a.children;if(b&&b.length){a.x=ie(b);a.y=he(b)}else{a.x=i?k=k+c(a,i):0;a.y=0;i=a}});var l=Zc(h),n=$c(h),p=l.x-c(l,n)/2,o=n.x+c(n,l)/2;ja(h,function(a){a.x=(a.x-p)/(o-p)*e[0];a.y=(1-(h.y?a.y/h.y:1))*e[1]});return d}var b=d3.layout.hierarchy().sort(null).value(null),c=ad,e=[1,1];a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e;
e=b;return a};return Qa(a,b)};d3.layout.tree=function(){function a(a,g){function d(a,b){var e=a.children,f=a._tree;if(e&&(g=e.length)){for(var g,h=e[0],i,k=h,m,l=-1;++l<g;){m=e[l];d(m,i);var n=m;if(i){for(var p=n,o=n,t=n.parent.children[0],r=p._tree.mod,q=o._tree.mod,s=i._tree.mod,u=t._tree.mod,y=void 0;i=Nb(i),p=Mb(p),i&&p;){t=Mb(t);o=Nb(o);o._tree.ancestor=n;y=i._tree.prelim+s-p._tree.prelim-r+c(i,p);if(y>0){var v=i._tree.ancestor.parent==n.parent?i._tree.ancestor:k,x=n,B=y,v=v._tree,x=x._tree,
z=B/(x.number-v.number);v.change=v.change+z;x.change=x.change-z;x.shift=x.shift+B;x.prelim=x.prelim+B;x.mod=x.mod+B;r=r+y;q=q+y}s=s+i._tree.mod;r=r+p._tree.mod;u=u+t._tree.mod;q=q+o._tree.mod}if(i&&!Nb(o)){o._tree.thread=i;o._tree.mod=o._tree.mod+(s-q)}if(p&&!Mb(t)){t._tree.thread=p;t._tree.mod=t._tree.mod+(r-u);k=n}}i=m}g=e=0;l=a.children;for(n=l.length;--n>=0;){k=l[n]._tree;k.prelim=k.prelim+e;k.mod=k.mod+e;e=e+(k.shift+(g=g+k.change))}h=0.5*(h._tree.prelim+m._tree.prelim);if(b){f.prelim=b._tree.prelim+
c(a,b);f.mod=f.prelim-h}else f.prelim=h}else if(b)f.prelim=b._tree.prelim+c(a,b)}function h(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(f=c.length))for(var e=-1,f,b=b+a._tree.mod;++e<f;)h(c[e],b)}var i=b.call(this,a,g),k=i[0];ja(k,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});d(k);h(k,-k._tree.prelim);var l=hb(k,ke),n=hb(k,je),p=hb(k,le),o=l.x-c(l,n)/2,r=n.x+c(n,l)/2,q=p.depth||1;ja(k,function(a){a.x=(a.x-o)/(r-o)*e[0];a.y=a.depth/q*e[1];delete a._tree});
return i}var b=d3.layout.hierarchy().sort(null).value(null),c=ad,e=[1,1];a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e;e=b;return a};return Qa(a,b)};d3.layout.treemap=function(){function a(a,b){for(var c=-1,e=a.length,f,g;++c<e;){g=(f=a[c]).value*(b<0?0:b);f.area=isNaN(g)||g<=0?0:g}}function b(c){var f=c.children;if(f&&f.length){var g=k(c),d=[],h=f.slice(),j=Infinity,i=Math.min(g.dx,g.dy);a(h,g.dx*g.dy/c.value);for(d.area=0;(c=
h.length)>0;){d.push(c=h[c-1]);d.area=d.area+c.area;for(var c=i,l=d.area,m=void 0,n=0,o=Infinity,r=-1,q=d.length;++r<q;)if(m=d[r].area){m<o&&(o=m);m>n&&(n=m)}l=l*l;c=c*c;if((c=l?Math.max(c*n*p/l,l/(c*o*p)):Infinity)<=j){h.pop();j=c}else{d.area=d.area-d.pop().area;e(d,i,g,false);i=Math.min(g.dx,g.dy);d.length=d.area=0;j=Infinity}}if(d.length){e(d,i,g,true);d.length=d.area=0}f.forEach(b)}}function c(b){var f=b.children;if(f&&f.length){var g=k(b),d=f.slice(),h=[];a(d,g.dx*g.dy/b.value);for(h.area=0;b=
d.pop();){h.push(b);h.area=h.area+b.area;if(b.z!=null){e(h,b.z?g.dx:g.dy,g,!d.length);h.length=h.area=0}}f.forEach(c)}}function e(a,b,c,e){var f=-1,g=a.length,h=c.x,i=c.y,k=b?d(a.area/b):0,l;if(b==c.dx){if(e||k>c.dy)k=c.dy;for(;++f<g;){l=a[f];l.x=h;l.y=i;l.dy=k;h=h+(l.dx=Math.min(c.x+c.dx-h,k?d(l.area/k):0))}l.z=true;l.dx=l.dx+(c.x+c.dx-h);c.y=c.y+k;c.dy=c.dy-k}else{if(e||k>c.dx)k=c.dx;for(;++f<g;){l=a[f];l.x=h;l.y=i;l.dx=k;i=i+(l.dy=Math.min(c.y+c.dy-i,k?d(l.area/k):0))}l.z=false;l.dy=l.dy+(c.y+
c.dy-i);c.x=c.x+k;c.dx=c.dx-k}}function f(e){var e=n||g(e),f=e[0];f.x=0;f.y=0;f.dx=h[0];f.dy=h[1];n&&g.revalue(f);a([f],f.dx*f.dy/f.value);(n?c:b)(f);l&&(n=e);return e}var g=d3.layout.hierarchy(),d=Math.round,h=[1,1],i=null,k=Ob,l=false,n,p=0.5*(1+Math.sqrt(5));f.size=function(a){if(!arguments.length)return h;h=a;return f};f.padding=function(a){function b(c){var e=a.call(f,c,c.depth);return e==null?Ob(c):bd(c,typeof e==="number"?[e,e,e,e]:e)}function c(b){return bd(b,a)}if(!arguments.length)return i;
var e;k=(i=a)==null?Ob:(e=typeof a)==="function"?b:e==="number"?(a=[a,a,a,a],c):c;return f};f.round=function(a){if(!arguments.length)return d!=Number;d=a?Math.round:Number;return f};f.sticky=function(a){if(!arguments.length)return l;l=a;n=null;return f};f.ratio=function(a){if(!arguments.length)return p;p=a;return f};return Qa(f,g)};d3.time={};var P=Date,pb="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(",");xa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},
getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ka.setUTCDate.apply(this._,arguments)},
setDay:function(){ka.setUTCDay.apply(this._,arguments)},setFullYear:function(){ka.setUTCFullYear.apply(this._,arguments)},setHours:function(){ka.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ka.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ka.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ka.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ka.setUTCSeconds.apply(this._,arguments)},setTime:function(){ka.setTime.apply(this._,arguments)}};var ka=
Date.prototype,od=pb.map(cd),qb="January,February,March,April,May,June,July,August,September,October,November,December".split(","),Wb=qb.map(cd);d3.time.format=function(a){function b(b){for(var f=[],g=-1,d=0,h,i;++g<c;)if(a.charCodeAt(g)==37){f.push(a.substring(d,g),(i=rb[h=a.charAt(++g)])?i(b):h);d=g+1}f.push(a.substring(d,g));return f.join("")}var c=a.length;b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(ib(c,a,b,0)!=b.length)return null;if("p"in c)c.H=c.H%12+c.p*12;b=new P;b.setFullYear(c.y,
c.m,c.d);b.setHours(c.H,c.M,c.S,c.L);return b};b.toString=function(){return a};return b};var Y=d3.format("02d"),pd=d3.format("03d"),Ke=d3.format("04d"),Le=d3.format("2d"),qd=jb(pb),rd=jb(od),sd=jb(qb),Me=dd(qb),td=jb(Wb),Ne=dd(Wb),rb={a:function(a){return od[a.getDay()]},A:function(a){return pb[a.getDay()]},b:function(a){return Wb[a.getMonth()]},B:function(a){return qb[a.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),d:function(a){return Y(a.getDate())},e:function(a){return Le(a.getDate())},
H:function(a){return Y(a.getHours())},I:function(a){return Y(a.getHours()%12||12)},j:function(a){return pd(1+d3.time.dayOfYear(a))},L:function(a){return pd(a.getMilliseconds())},m:function(a){return Y(a.getMonth()+1)},M:function(a){return Y(a.getMinutes())},p:function(a){return a.getHours()>=12?"PM":"AM"},S:function(a){return Y(a.getSeconds())},U:function(a){return Y(d3.time.sundayOfYear(a))},w:function(a){return a.getDay()},W:function(a){return Y(d3.time.mondayOfYear(a))},x:d3.time.format("%m/%d/%y"),
X:d3.time.format("%H:%M:%S"),y:function(a){return Y(a.getFullYear()%100)},Y:function(a){return Ke(a.getFullYear()%1E4)},Z:function(a){var b=a.getTimezoneOffset(),a=b>0?"-":"+",c=~~(Math.abs(b)/60),b=Math.abs(b)%60;return a+Y(c)+Y(b)},"%":function(){return"%"}},me={a:function(a,b,c){rd.lastIndex=0;return(a=rd.exec(b.substring(c)))?c+a[0].length:-1},A:function(a,b,c){qd.lastIndex=0;return(a=qd.exec(b.substring(c)))?c+a[0].length:-1},b:function(a,b,c){td.lastIndex=0;return(b=td.exec(b.substring(c)))?
(a.m=Ne.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){sd.lastIndex=0;return(b=sd.exec(b.substring(c)))?(a.m=Me.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,c){return ib(a,rb.c.toString(),b,c)},d:ed,e:ed,H:fd,I:fd,L:function(a,b,c){O.lastIndex=0;return(b=O.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1},m:function(a,b,c){O.lastIndex=0;return(b=O.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1},M:function(a,b,c){O.lastIndex=0;return(b=O.exec(b.substring(c,
c+2)))?(a.M=+b[0],c+b[0].length):-1},p:function(a,b,c){b=Oe.get(b.substring(c,c=c+2).toLowerCase());return b==null?-1:(a.p=b,c)},S:function(a,b,c){O.lastIndex=0;return(b=O.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1},x:function(a,b,c){return ib(a,rb.x.toString(),b,c)},X:function(a,b,c){return ib(a,rb.X.toString(),b,c)},y:function(a,b,c){O.lastIndex=0;return(b=O.exec(b.substring(c,c+2)))?(a.y=+b[0]+(+b[0]>68?1900:2E3),c+b[0].length):-1},Y:function(a,b,c){O.lastIndex=0;return(b=O.exec(b.substring(c,
c+4)))?(a.y=+b[0],c+b[0].length):-1}},O=/^\s*\d+/,Oe=d3.map({am:0,pm:1});d3.time.format.utc=function(a){function b(a){try{P=xa;var b=new P;b._=a;return c(b)}finally{P=Date}}var c=d3.time.format(a);b.parse=function(a){try{P=xa;var b=c.parse(a);return b&&b._}finally{P=Date}};b.toString=c.toString;return b};var ud=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?Pb:ud;Pb.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Pb.toString=ud.toString;d3.time.second=
ya(function(a){return new P(Math.floor(a/1E3)*1E3)},function(a,b){a.setTime(a.getTime()+Math.floor(b)*1E3)},function(a){return a.getSeconds()});d3.time.seconds=d3.time.second.range;d3.time.seconds.utc=d3.time.second.utc.range;d3.time.minute=ya(function(a){return new P(Math.floor(a/6E4)*6E4)},function(a,b){a.setTime(a.getTime()+Math.floor(b)*6E4)},function(a){return a.getMinutes()});d3.time.minutes=d3.time.minute.range;d3.time.minutes.utc=d3.time.minute.utc.range;d3.time.hour=ya(function(a){var b=
a.getTimezoneOffset()/60;return new P((Math.floor(a/36E5-b)+b)*36E5)},function(a,b){a.setTime(a.getTime()+Math.floor(b)*36E5)},function(a){return a.getHours()});d3.time.hours=d3.time.hour.range;d3.time.hours.utc=d3.time.hour.utc.range;d3.time.day=ya(function(a){var b=new P(0,a.getMonth(),a.getDate());b.setFullYear(a.getFullYear());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});d3.time.days=d3.time.day.range;d3.time.days.utc=d3.time.day.utc.range;d3.time.dayOfYear=
function(a){var b=d3.time.year(a);return Math.floor((a-b-(a.getTimezoneOffset()-b.getTimezoneOffset())*6E4)/864E5)};pb.forEach(function(a,b){var a=a.toLowerCase(),b=7-b,c=d3.time[a]=ya(function(a){(a=d3.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+Math.floor(b)*7)},function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});d3.time[a+"s"]=c.range;d3.time[a+"s"].utc=c.utc.range;d3.time[a+"OfYear"]=function(a){var c=
d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)}});d3.time.week=d3.time.sunday;d3.time.weeks=d3.time.sunday.range;d3.time.weeks.utc=d3.time.sunday.utc.range;d3.time.weekOfYear=d3.time.sundayOfYear;d3.time.month=ya(function(a){a=d3.time.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});d3.time.months=d3.time.month.range;d3.time.months.utc=d3.time.month.utc.range;d3.time.year=ya(function(a){a=d3.time.day(a);a.setMonth(0,
1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});d3.time.years=d3.time.year.range;d3.time.years.utc=d3.time.year.utc.range;var lb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Xb=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,
12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],Pe=[[d3.time.format("%Y"),function(){return true}],[d3.time.format("%B"),function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return a.getDate()!=1}],[d3.time.format("%a %d"),function(a){return a.getDay()&&a.getDate()!=1}],[d3.time.format("%I %p"),function(a){return a.getHours()}],[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],[d3.time.format(":%S"),function(a){return a.getSeconds()}],
[d3.time.format(".%L"),function(a){return a.getMilliseconds()}]],vd=d3.scale.linear(),Qe=gd(Pe);Xb.year=function(a,b){return vd.domain(a.map(ne)).ticks(b).map(Sb)};d3.time.scale=function(){return Qb(d3.scale.linear(),Xb,Qe)};var wd=Xb.map(function(a){return[a[0].utc,a[1]]}),Re=[[d3.time.format.utc("%Y"),function(){return true}],[d3.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(a){return a.getUTCDate()!=1}],[d3.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&
a.getUTCDate()!=1}],[d3.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],Se=gd(Re);wd.year=function(a,b){return vd.domain(a.map(oe)).ticks(b).map(Tb)};d3.time.scale.utc=function(){return Qb(d3.scale.linear(),wd,Se)}})();
(function(){function d(h,i){i=i||{};h=$(h)[0];this.sort=!!i.sort;this.data=$R.value();this.width=$R.value(i.width||$(h).width());this.height=$R.value(i.height||$(h).height());var k=$R.value(i.margin||0),l=$R(function(d,h,i){return Math.min(d-i,h-i)/2}),s=$R.value(i.innerRadius||0),n=$R(d.arc,this),q=$R(d.layout,this),p=$R(d.paths,this),r=d3.select(h).append("g").attr("transform","translate("+this.width()/2+","+this.height()/2+")");l.bindTo(this.width,this.height,k);n.bindTo(l,s,k);p.bindTo(r,q,n,
this.data)}function k(d,i){d=$(d)[0];this.canvasX=$R.value(0);this.canvasY=$R.value(0);this.canvasWidth=$R.value($(d).width());this.canvasHeight=$R.value($(d).height());this.top=$R.value(i.top||0);this.right=$R.value(i.right||this.canvasWidth());this.bottom=$R.value(i.bottom||this.canvasHeight());this.left=$R.value(i.left||0);this.width=$R(function(d,h){return h-d}).bindTo(this.left,this.right);this.height=$R(function(d,h){return h-d}).bindTo(this.top,this.bottom);this.viz=d3.select(d);this.appendGroup=
function(){return this.viz.append("g")};this.mixin=_.reduce(w.charts.mixins,function(d,h,i){d[i]=_.bind(h,this);return d},{},this)}w=w||{};w.charts={};w.charts.mixins={};d.keyFnc=function(d){return d&&d.data.id||$(this).data("pie-slice-id")};d.sortFnc=function(d,i){return d3.ascending(d.orderIndex,i.orderIndex)};d._difference=function(d,i){var k=_.difference(_.pluck(i,"id"),_.pluck(d,"id"));return _.filter(i,function(d){return _.contains(k,d.id)})};d._zeroedDifference=function(h,i){var k=d._difference(h,
i).map(function(d){return _.chain(d).clone().tap(function(d){d.value=0}).value()});return h.concat(k)};d._nonZeroedDifference=function(h,i){return h.concat(d._difference(h,i))};d.arc=function(d,i,k){return d3.svg.arc().outerRadius(d-k).innerRadius(i)};d.layout=function(){return d3.layout.pie().value(function(d){return d.value}).sort(this.sort?d.sortFnc:null)};d.paths=_.throttle(function(h,i,k,l){function s(d){var h=d3.interpolate(this._current,d);this._current=h(0);return function(d){return k(h(d))}}
var n=this._oldData||l,q=d._zeroedDifference(n,l),p=d._nonZeroedDifference(n,l),n=d._zeroedDifference(l,n);h.selectAll(".segment").data(i(q),d.keyFnc).enter().append("path").attr("data-pie-slice-id",function(d){return d.data.id}).attr("class",function(d){return["segment",d.data.id].join(" ")}).attr("d",k).each(function(d){this._current=d});h.selectAll(".segment").data(i(p),d.keyFnc).transition().duration(500).attrTween("d",s);h.selectAll(".segment").data(i(n),d.keyFnc).transition().duration(500).attrTween("d",
s).each("end",function(d){0===d.value&&d3.select(this).remove()});h.selectAll(".segment").data(i(l),d.keyFnc).transition().duration(500).attrTween("d",s);this._oldData=l},500);w.charts.Pie=d;w.charts.Stack=function(d,i){i=i||{};k.apply(this,[d,i]);this.data=$R.value();var o=$R.value(d3.layout.stack().offset("expand")),l=this.appendGroup(),o=$R(function(d,h){return d&&h?h(_.map(d,function(d){var h=_.map(d.values,function(d,h){return{x:h,y:d}});h.id=d.id;h.html_class=d.html_class;return h})):[]},this).bindTo(this.data,
o);this.xDomainFunction=$R.value(function(d){return[0,_.chain(d).pluck("length").max().value()-1]});this.x=$R(function(d,h,i,k){return d3.scale.linear().nice().domain(k(d)).range([i,i+h])}).bindTo(o,this.width,this.left,this.xDomainFunction);this.y=$R(function(d,h,i){return d3.scale.linear().nice().domain([0,d3.max(d,function(d){return d3.max(d,function(d){return d.y0+d.y})})]).range([h+i,i])}).bindTo(o,this.height,this.top);var s=$R(function(d,h){return d3.svg.area().x(function(h){return d(h.x)}).y0(function(d){return h(d.y0)}).y1(function(d){return h(d.y0+
d.y)})}).bindTo(this.x,this.y);$R(function(d,h){var i=l.selectAll("path").data(d);i.enter().append("path");i.attr("d",h).attr("class",function(d){return d.html_class||d.id})}).bindTo(o,s)};w.charts.Line=function(d,i){i=i||{};k.apply(this,[d,i]);this.data=$R.value();var o=this.appendGroup(),l=$R(function(d){return _.map(d,function(d){var h=_.map(d.values,function(d){return{x:d.x,y:d.y}});h.id=d.id;h.html_class=d.html_class;return h})},this).bindTo(this.data);this.yDomainFunction=$R.value(function(d){return d3.extent(_.flatten(_.map(d,
function(d){return _.pluck(d,"y")})))});this.xDomainFunction=$R.value(function(d){return d3.extent(_.flatten(_.map(d,function(d){return _.pluck(d,"x")})))});this.x=$R(function(d,h,i,k){return d3.scale.linear().nice().domain(i(d)).range([k,k+h])}).bindTo(l,this.width,this.xDomainFunction,this.left);this.y=$R(function(d,h,i,k){return d3.scale.linear().nice().domain(i(d)).range([h+k,k])}).bindTo(l,this.height,this.yDomainFunction,this.top);var s=$R(function(d,h){return d3.svg.line().x(function(h){return d(h.x)}).y(function(d){return h(d.y)})}).bindTo(this.x,
this.y);$R(function(d,h){var i=o.selectAll("path").data(d);i.enter().append("path");i.attr("d",function(d){return h(d)}).attr("class",function(d){return d.html_class||d.id});i.exit().remove()}).bindTo(l,s)};w.charts.mixins.YAxis=function(d){var d=d||{},i=this.yAxis={};i.top=$R(_.identity).bindTo(d.y||d.top||this.top);i.bottom=$R(_.identity).bindTo(d.y||d.bottom||this.bottom);i.left=$R(_.identity).bindTo(d.x||d.left||this.left);i.right=$R(_.identity).bindTo(d.x||d.right||this.right);i.yTicksFunction=
$R.value(function(d){return d.ticks(4)});i.yTicks=$R(function(d,h){return h(d)}).bindTo(this.y,i.yTicksFunction);i.yTicksFormat=$R.value(String);var k=this.appendGroup(),l=this.appendGroup();$R(function(d,h,i,k){d=d3.svg.axis().scale(d).tickValues(h).orient("left").tickFormat(k);l.attr("class","y axis ylabel").attr("transform","translate("+i+",0)").call(d)}).bindTo(this.y,i.yTicks,i.left,i.yTicksFormat);$R(function(d,h,i,l){i=k.selectAll(".yrule").data(i);i.enter().append("line");i.attr("class","yrule").attr("x1",
l).attr("x2",h).attr("y1",d).attr("y2",d);i.exit().remove()}).bindTo(this.y,i.right,i.yTicks,i.left);return i};w.charts.mixins.XAxis=function(d){var d=d||{},i=this.xAxis={};i.top=$R(_.identity).bindTo(d.y||d.top||this.top);i.bottom=$R(_.identity).bindTo(d.y||d.bottom||this.bottom);i.left=$R(_.identity).bindTo(d.x||d.left||this.left);i.right=$R(_.identity).bindTo(d.x||d.right||this.right);i.xTicksFunction=$R.value(function(d){return d.ticks(4)});i.xTicks=$R(function(d,h){return h(d)}).bindTo(this.x,
i.xTicksFunction);i.xTicksFormat=$R.value(String);var k=this.appendGroup(),l=this.appendGroup();$R(function(d,h,i,k,o){d=d3.svg.axis().scale(d).tickValues(h).orient("bottom").tickFormat(o);l.attr("class","x axis xlabel").attr("transform","translate(0,"+k+")").call(d)}).bindTo(this.x,i.xTicks,i.top,i.bottom,i.xTicksFormat);$R(function(d,h,i,l){h=k.selectAll(".xrule").data(h);h.enter().append("line");h.attr("class","xrule").attr("x1",d).attr("x2",d).attr("y1",i).attr("y2",l);h.exit().remove()}).bindTo(this.x,
i.xTicks,i.top,i.bottom);return i};w.charts.mixins.XTitle=function(d){var d=d||{},i=this.xTitle={};i.titleText=$R.value();i.top=$R(_.identity).bindTo(d.y||d.top||this.bottom);i.bottom=$R(_.identity).bindTo(d.y||d.bottom||this.canvasHeight);i.left=$R(_.identity).bindTo(d.x||d.left||this.left);i.right=$R(_.identity).bindTo(d.x||d.right||this.right);i.x=$R(function(d,h){return(h-d)/2+d}).bindTo(i.left,i.right);i.y=$R(function(d,h){return(h-d)/2+d}).bindTo(i.top,i.bottom);var k=this.appendGroup();$R(function(d,
h,i){i=k.selectAll(".xtitle").data(_.flatten([i]));i.enter().append("text");i.attr("class","xtitle").attr("transform","translate("+d+","+h+")").attr("dy","0.5em").text(function(d){return d});i.exit().remove()},this).bindTo(i.x,i.y,i.titleText);d.title&&i.titleText(d.title);return i};w.charts.mixins.YTitle=function(d){var d=d||{},i=this.yTitle={};i.titleText=$R.value();i.top=$R(_.identity).bindTo(d.y||d.top||this.top);i.bottom=$R(_.identity).bindTo(d.y||d.bottom||this.bottom);i.left=$R(_.identity).bindTo(d.x||
d.left||this.canvasX);i.right=$R(_.identity).bindTo(d.x||d.right||this.left);i.x=$R(function(d,h){return(h-d)/2+d}).bindTo(i.left,i.right);i.y=$R(function(d,h){return(h-d)/2+d}).bindTo(i.top,i.bottom);var k=this.appendGroup();$R(function(d,h,i){i=k.selectAll(".ytitle").data(_.flatten([i]));i.enter().append("text");i.attr("class","ytitle").attr("transform","rotate(-90) translate("+-h+","+d+")").attr("dy","0.5em").text(function(d){return d});i.exit().remove()},this).bindTo(i.x,i.y,i.titleText);d.title&&
i.titleText(d.title);return i}})();w=w||{};w.plan={riskToIndex:function(d,k){return Math.round(d*k)-1},cleanRisk:function(d,k,h,i){d=Math.min(Math.max(h,d),k);return Math.round(d*i)/i},getAllocation:function(d,k){var d=w.plan.cleanRisk(d,k.max_risk,k.min_risk,k.granularity),h=w.plan.riskToIndex(d,k.granularity),i={};_.each(k.allocations,function(d,k){d[h]&&(i[k]=d[h])});return i},allocationAsPie:function(d,k){return _.map(d,function(d,i){return{id:i,value:d,orderIndex:k[i]}})}};var dataStub={data:function(){return $.noop}};
function serializePlan(d,k){function h(d){return(""+(d||"")).replace(/[$,]/g,"")}k=parseInt(k||4);return[k,h(d.amount),d.tol,d.rec,d.age,h(d.lnw),h(d.income),d.stability,d.goal,d.options,d.angel,d.concern,d.response,d.portfolio].join("|")}function deserializePlan(d){d=d.split("|");if(0<=d[0])return{amount:d[1],tol:d[2],rec:d[3],age:d[4],lnw:d[5],income:d[6],stability:d[7],goal:d[8],options:d[9],angel:d[10],concern:d[11],response:d[12],portfolio:d[13]}}
function valsFromDom(d){return{age:ageFromDom(d.filter("[name=age]")[0]),stability:d.filter("[name=stability]:checked").val(),options:d.filter("[name=options]:checked").val(),angel:d.filter("[name=angel]:checked").val(),goal:d.filter("[name=goal]:checked").val(),concern:d.filter("[name=concern]:checked").val(),response:d.filter("[name=response]:checked").val(),portfolio:d.filter("[name=portfolio]:checked").val(),lnw:amountFromDom(d.filter("[name=lnw]")[0]),income:amountFromDom(d.filter("[name=income]")[0]),
rec:parseFloat(d.filter("[name=rec]").val())}}function ageFromDom(d){d=d.value;return d.match(/^\d{1,2}$/)?+d:null}function amountFromDom(d){d=d.value.replace(/[\$,]/g,"");return d.match(/^\d+$/)?+d:null}
function attachAllocationPie(d,k){if(!window.w.hasSVG())return $.noop;var k=$.extend({gradients:{"plan-pie-grad-0":["#70c046","#ace98c"],"plan-pie-grad-1":["#b847af","#f369e8"],"plan-pie-grad-2":["#2293bb","#6ac9ea"],"plan-pie-grad-3":["#ebab17","#f4cf66"],"plan-pie-grad-4":["#5d4ef9","#8c81ff"],"plan-pie-grad-5":["#dc570e","#ff7e00"],"plan-pie-grad-6":["#a57005","#daa73e"],"plan-pie-grad-7":["#e19e7d","#ffc8ad"],"plan-pie-grad-8":["#ef45a8","#ff7bc7"],"plan-pie-grad-9":["#b8124a","#f7296c"],"plan-pie-grad-10":["#065190",
"#1a72bd"],"plan-pie-grad-11":["#296c30","#52a95b"]},color:function(d){return"url(#plan-pie-grad-"+d+")"}},k||{}),h=$(d),i=h.width(),o=h.height(),l=Math.min(i,o)/2,s=l-(k.shadowPx||0),n=d3.svg.arc().startAngle(function(d){return d.startAngle}).endAngle(function(d){return d.endAngle}).innerRadius(0).outerRadius(s),q=d3.layout.pie().sort(null)(k.allocation),p=d3.select(h[0]).append("svg:svg").attr("width",i).attr("height",o).append("svg:g").attr("transform","translate("+i/2+","+o/2+")"),i=k.gradients||
k.shadowPx?p.append("svg:defs"):null;if(k.gradients)for(var r in k.gradients)o=k.gradients[r],h=i.append("svg:radialGradient").attr("id",r).attr("gradientUnits","userSpaceOnUse").attr("cx",0).attr("cy",0).attr("r",s),h.append("svg:stop").attr("offset",0).attr("stop-color",o[1]),h.append("svg:stop").attr("offset",0.3).attr("stop-color",o[1]),h.append("svg:stop").attr("offset",1).attr("stop-color",o[0]);if(k.shadowPx){r="pie-shadow-"+(""+Math.random()).substring(2);h=i.append("svg:radialGradient").attr("id",
r).attr("gradientUnits","userSpaceOnUse").attr("cx",0).attr("cy",0).attr("r",l);s=1-s/(4*l);for(i=0;5>i;i++)o=s+(1-s)*(i+1)/5,h.append("svg:stop").attr("offset",o).attr("stop-color","#000").attr("stop-opacity",i&&10*(o-1)*(o-1));p.append("svg:circle").attr("r",l).style("fill","url(#"+r+")")}p.selectAll("path").data(q).enter().append("svg:path").attr("d",n).style("fill",function(d,h){return k.color(h)}).each(k.eachSlice||$.noop);return function(d,h){var i=q,k=d3.layout.pie().sort(null)(d);p.selectAll("path").data(k).transition().duration(h).attrTween("d",
function(d,h){var l=d3.interpolateObject(i[h],k[h]);return function(d){return n(l(d),h)}});q=k}}
function attachAllocationPie2(d,k){if(!window.w.hasSVG())return $.noop;var k=$.extend({},k||{}),h=$(d),i=h.width(),o=h.height(),l=Math.min(i,o)/2-(k.shadowPx||0),s=d3.svg.arc().startAngle(function(d){return d.startAngle}).endAngle(function(d){return d.endAngle}).innerRadius(0).outerRadius(l),n=d3.layout.pie().sort(null)(k.allocation),q=d3.select(h[0]).append("svg:svg").attr("width",i).attr("height",o).append("svg:g").attr("transform","translate("+i/2+","+o/2+")");q.selectAll("path").data(n).enter().append("svg:path").attr("d",
s).attr("class",function(d,h){return"legend-color-fill-"+(h+1)}).each(k.eachSlice||$.noop);return function(d,h){var i=n,k=d3.layout.pie().sort(null)(d);q.selectAll("path").data(k).transition().duration(h).attrTween("d",function(d,h){var l=d3.interpolateObject(i[h],k[h]);return function(d){return s(l(d),h)}});n=k}}
function attachGrowingBar(d,k){if(!window.w.hasSVG())return{reset:$.noop,draw:$.noop};var h=$(d),i=k.data,o=i.length,l=h.width(),s=h.height(),n=k.subtext?24:15,q=(l-30*o)/(o+1),p=d3.scale.linear().domain([0,k.maxValue]).range([0,s-22.5-n]),r=d3.select(h[0]).append("svg:svg").attr("width",l).attr("height",s).append("svg:g").attr("transform","scale(1,-1) translate(0,-"+s+")");r.selectAll("line").data(i).enter().append("svg:line").attr("x1",function(d,h){return(h+1)*q+30*h}).attr("y1",22.5).attr("x2",
function(d,h){return(h+1)*(q+30)}).attr("y2",22.5).style("stroke","#999").style("stroke-width","1px");r.selectAll("rect").data(i).enter().append("svg:rect").attr("x",function(d,h){return(h+1)*q+30*h+5}).attr("y",22.5).attr("width",20).attr("height",p).style("fill",function(d,h){return k.color(h)});var x=r.append("svg:g").attr("transform","scale(1,-1)");x.selectAll("text").data(i).enter().append("svg:text").attr("text-anchor","middle").attr("x",function(d,h){return(h+1)*q+30*(h+0.5)}).style("font-size",
"9pt").style("fill","#333");if(k.subtext){var E=r.append("svg:g").attr("transform","scale(1,-1)");E.selectAll("text").data(i).enter().append("svg:text").attr("text-anchor","middle").attr("x",function(d,h){return(h+1)*q+30*(h+0.5)}).style("font-size","7pt").style("fill","#777")}if(k.axisLabels)for(var J=0;2>J;J++)r.append("svg:g").attr("transform","scale(1,-1)").selectAll("text").data(i).enter().append("svg:text").attr("text-anchor","middle").attr("x",function(d,h){return(h+1)*q+30*(h+0.5)}).attr("y",
10*J-11).style("font-size","7pt").style("fill","#333").text(function(d,h){return k.axisLabels[h][J]||""});return{reset:function(){r.selectAll("rect").data(i).attr("height",0);x.selectAll("text").text("");E.selectAll("text").text("")},draw:function(d,h){r.selectAll("rect").data(d).transition().duration(h).attr("height",p);x.selectAll("text").data(d).transition().delay(h).duration(0).text(k.format).attr("y",function(d){return-(22.5+p(d)+(k.subtext?14:5))});k.subtext&&E.selectAll("text").data(d).transition().delay(h).duration(0).text(function(d){return d?
k.subtext:""}).attr("y",function(d){return-(22.5+p(d)+5)})}}}
function attachRiskMeter(d,k){function h(d,h,i,k){var l="rotate("+d*B+")";S.transition().duration(i).ease(h).attrTween("transform",function(d,h,i){return d3.interpolateString(i,l)});k&&setTimeout(k,i)}function i(d,h){var i=-(q+h),k=d*v;return{x:i*Math.cos(k),y:i*Math.sin(k)}}if(!window.w.hasSVG())return $.noop;var k=k||{},o=!1!==k.showNumbers,l=k.scaling||1,s=225*l,n=125*l,q=100*l,p=108*l,r=110*l,x=d3.range(0,11),E=1.5*Math.PI,J=Math.PI,B=J*(180/Math.PI),v=J/(x.length-1),s=d3.select(d).append("svg:svg").attr("width",
s).attr("height",n).append("svg:g").attr("transform","translate("+s/2+","+(n-10*l)+")");s.selectAll("path").data([0,2,4,6,8]).enter().append("svg:path").style("fill",function(d){return d3.hsl(120-15*d,(90+d)/100,(34+3.5*d)/100).rgb().toString()}).attr("d",d3.svg.arc().startAngle(function(d){return E+d*v}).endAngle(function(d){return E+(d+2)*v}).innerRadius(q).outerRadius((p+r)/2));s.append("svg:path").style("fill","#444").attr("d",d3.svg.arc().startAngle(E).endAngle(E+J).innerRadius(p).outerRadius(r));
o&&s.selectAll("text").data([0,2,4,6,8,10]).enter().append("svg:text").attr("x",function(d){return i(d,-20*l-2).x}).attr("y",function(d){return i(d,-20*l-2).y+2*l+1}).style("text-anchor","middle").text(function(d){return d});var M=-6/B,I=s.append("svg:line").attr("x1",0).attr("y1",0).attr("x2",-q+35*l).attr("y2",0).style("stroke","#999").style("stroke-width","2px").style("stroke-dasharray","2,1").style("display","none"),S=s.append("svg:line").attr("id","needle").attr("transform","rotate("+M*B+")").attr("x1",
0).attr("y1",0).attr("x2",-q+35*l).attr("y2",0).style("stroke","#444").style("stroke-width","2px");s.append("svg:circle").attr("r",4*l).style("fill","#444").style("stroke","#444").style("stroke-width","2px");s.selectAll(".ticks").data(x).enter().append("svg:line").style("stroke","#444").style("shape-rendering",function(d){return d%10?"auto":"crispEdges"}).attr("x1",function(d){return-q+10/(1+d%2)*l}).attr("x2",-r).attr("transform",function(d){return"rotate("+d*v*(180/Math.PI)+")"});return function(d,
i){h(d,"elastic",1E3);null!=i&&I.attr("transform","rotate("+i*B+")").style("display","");0.025>=Math.abs(d-M)&&h(d+0.016,"sin",200,function(){h(d-0.016,"sin",250,function(){h(d,"linear",1E3/3)})});M=d}}
function attachProjectionChart(d,k,h,i,o,l){function s(d,h){function i(d){return X?d.transition().duration(za):d}var k=d3.scale.linear().domain([0,l*d]).ticks(10).pop();H.domain([0,k]);$(Aa.node()).data("update")();$(ca.node()).data("update")();var o=function(d){return d.p01/k},q=function(d){return d.p20/k},s=function(d){return d.pMode/k},v=function(d){return d.p50/k},x=function(d){return Math.min(1,d.p80/k)},I=function(d){return Math.min(1,d.p95/k)},L=function(d,h){return 1-d.pdf20/d.pdfMode*(1-
h/r/1.5)},N=function(d,h){return h/r/1.5},M=function(d,h){return 1-d.pdf50/d.pdfMode*(1-h/r/1.5)},na=function(d,h){var i=1-d.pdf80/d.pdfMode*(1-h/r/1.5);if(d.p80<=k)return i;var l=(k-d.p50)/(d.p80-d.p50);return l*i+(1-l)*(1-d.pdf50/d.pdfMode*(1-h/r/1.5))},T=function(d,h){if(d.p95<=k)return 1;var i=(k-d.p80)/(d.p95-d.p80);return 1*i+(1-i)*(1-d.pdf80/d.pdfMode*(1-h/r/1.5))};if(W){var X=!0;W.data(h);i(W.select(":nth-child(1)")).attr("offset",o);i(W.select(":nth-child(2)")).attr("offset",q).attr("stop-opacity",
L);i(W.select(":nth-child(3)")).attr("offset",s).attr("stop-opacity",N);i(W.select(":nth-child(4)")).attr("offset",v).attr("stop-opacity",M);i(W.select(":nth-child(5)")).attr("offset",x).attr("stop-opacity",na);i(W.select(":nth-child(6)")).attr("offset",I).attr("stop-opacity",T)}else W=Ha.selectAll("[id]").data(h).enter().append("svg:linearGradient").attr("id",function(d,h){return Q+h}).attr("x2",0).attr("y2",1).each(function(d,h){var i=d3.select(this);i.append("svg:stop").attr("offset",o).attr("stop-opacity",
1).attr("stop-color","#fff");i.append("svg:stop").attr("offset",q).attr("stop-opacity",L(d,h)).attr("stop-color","#fff");i.append("svg:stop").attr("offset",s).attr("stop-opacity",h/r/1.5).attr("stop-color","#fff");i.append("svg:stop").attr("offset",v).attr("stop-opacity",M(d,h)).attr("stop-color","#fff");i.append("svg:stop").attr("offset",x).attr("stop-opacity",na(d,h)).attr("stop-color","#fff");i.append("svg:stop").attr("offset",I).attr("stop-opacity",T(d,h)).attr("stop-color","#fff");Ga.append("svg:rect").style("fill",
"url(#"+(Q+h)+")").attr("x",U(h)-2).attr("y",B).attr("width",3).attr("height",S)});i(Fa.style("display","")).attr("height",H(d));i(sb.style("display","")).attr("y",H(d)).attr("height",E-J-H(d));i(tb.text(w.assetsAmount(d))).attr("y",-H(d)+4);p.data("amount",d).data("amounts",h);n(+Ia.attr("x1"),!0)}function n(d,h){function i(d){return h?d.transition().duration(za):d}0<=d||(d=U(12*o),h=!1);var k=Math.round(Math.min(r,Math.max(1,U.invert(d)))),l=Math.round(U(k)),n=p.data("amount"),q=p.data("amounts"),
s=q[k].p01,x=q[k].p50,E=H(n),Fa=H(s),s=H(x);i(aa).attr("transform","translate("+l+","+(B-9)+")");i(Ia).attr("x1",l).attr("x2",l);i(T).style("display","none").attr("d","M"+(l-2)+" "+E+"h4V"+Fa+"h-4Z");i(da).attr("cx",l+0.5).attr("cy",s);fa.text(w.assetsAmount(x));Ba.text(w.formatNum(100*(Math.pow(x/n,12/k)-1),2));ga.text(Math.round(q[k].loss));$.each([N,X],function(d,h){var i=h.node(),k=i.parentNode;k.removeChild(i);k.appendChild(i)});k=N.node().getBoundingClientRect().width+10;n=X.node().getBoundingClientRect().width+
10;s=Math.round(s+10);E=Math.round(E-(Ja+4));q=v+I-l<k+10;x=l+(q?-k-3:4);l+=q?-n-3:4;Va.attr("width",k);Ka.attr("width",n);q&&h&&(L.attr("transform",L.attr("transform").replace(/translate.*?,/,"translate("+x+",")),pa.attr("d",pa.attr("d").replace(/M.*? /,"M"+(k-4)+" ")));i(L).attr("transform","translate("+x+","+s+")");i(pa).attr("d",q?"M"+(k-4)+" 0h-8l12 -7Z":"M4 0h8l-12 -7Z");i(oa).attr("transform","translate("+l+","+E+")")}function q(d,h,i){for(var l=Array(r+1),n=0;n<=r;n++){var o=projectPerf(h,
k,d,n,i),p=getCumulativeParameters(h,k,d,n,i),q=p[0],p=p[1],v=Math.exp(q-p*p);l[n]={p01:d*o.p01,p20:d*o.p20,pMode:d*v,p50:d*o.p50,p80:d*o.p80,p95:d*o.p95,loss:o.loss,pdf20:logNormalPdf(q,p,o.p20),pdfMode:logNormalPdf(q,p,v),pdf50:logNormalPdf(q,p,o.p50),pdf80:logNormalPdf(q,p,o.p80)}}s(d,l)}if(!window.w.hasSVG())return dataStub;var p=$(d),r=12*i,x=p.width(),E=p.height(),J=5,B=42,v=54,M=x-v-3*r,I=x-v-M,S=E-J-B,U=d3.scale.linear().domain([0,r]).range([v,v+I]),H=d3.scale.linear().domain([0,h*l]).range([B,
B+S]),za=500,d=d3.select(d).insert("svg:svg").attr("width",x).attr("height",E).append("svg:g").attr("transform","scale(1,-1) translate(0,-"+E+")"),Fa=d.append("svg:rect").attr("class","loss").attr("x",v).attr("y",B).attr("height",H(h)).attr("width",I).style("fill","#777").style("display","none"),sb=d.append("svg:rect").attr("class","gain").attr("x",v).attr("y",H(h)).attr("height",E-J-H(h)).attr("width",I).style("fill","#080").style("display","none");d.append("svg:rect").attr("class","track").attr("x",
v-2).attr("y",B-10).attr("height",4).attr("width",I+4).attr("rx",2).attr("ry",2).attr("fill","#f2f2f2");(""+Math.random()).substring(2,8);var Q="plan-perf-gradient-"+(""+Math.random()).substring(2,8)+"-",Ga=d.append("svg:g").attr("class","cloud"),Ha=Ga.append("svg:defs"),W,i=d3.scale.linear().domain([0,i]).ticks(i+1);d.append("svg:g").attr("class","x-labels").attr("transform","scale(1,-1)").attr("text-anchor","middle").style("fill","#777").style("font-size","8pt").selectAll("text").data(i).enter().append("svg:text").attr("x",
function(d){return U(12*d)}).attr("y",26-B).text(function(d){return d});d.append("svg:g").attr("class","x-lines").style("fill","#000").style("opacity",".06").selectAll("rect").data(i).enter().append("svg:rect").attr("x",function(d,h){return U(12*h)}).attr("y",B).attr("width",1).attr("height",S);d.append("svg:line").attr("class","x-ticks").attr("x1",v).attr("y1",B+2).attr("x2",v+I+1).attr("y2",B+2).style("stroke","#ddd").style("stroke-width","3").style("stroke-dasharray","0 9 1 8 1 8 1 8");d.append("svg:line").attr("class",
"x-ticks").attr("x1",v).attr("y1",B+4).attr("x2",v+I+1).attr("y2",B+4).style("stroke","#ddd").style("stroke-width","2").style("stroke-dashoffset","18").style("stroke-dasharray","1 35");var Aa=d.append("svg:g").style("shape-rendering","crispEdges").style("stroke","#000").style("opacity",".06");$(Aa.node()).data("update",function(){var d=Aa.selectAll("line").data(H.ticks(10)).attr("y1",H).attr("y2",H);d.enter().append("svg:line").attr("x1",v).attr("x2",v+I).attr("y1",H).attr("y2",H);d.exit().remove()}).data("update")();
var ca=d.append("svg:g").attr("transform","scale(1,-1)").style("fill","#777").style("font-size","8pt");$(ca.node()).data("update",function(){var d=ca.selectAll("text").data(H.ticks(10)).attr("y",function(d){return-H(d)+4}).text(function(d){return w.assetsAmount(d)});d.enter().append("svg:text").attr("x",v+I+10).attr("y",function(d){return-H(d)+4}).text(function(d){return w.assetsAmount(d)});d.exit().remove()}).data("update")();i=d.append("svg:g").attr("transform","scale(1,-1)").attr("class","labels").style("fill",
"black").style("font-size","8pt");i.append("svg:text").style("font-size","9pt").style("text-anchor","middle").attr("x",v+I/2).attr("y",-2).text("Investment Duration (years)");var tb=i.append("svg:text").attr("text-anchor","end").attr("x",v-6).attr("y",-H(h)+4).style("fill","#333").text(w.assetsAmount(h)),h=d.append("svg:g").attr("class","data"),Ia=h.append("svg:line").style("stroke","#000").style("stroke-width","1").style("stroke-dasharray","1").style("shape-rendering","crispEdges").attr("x1",-5).attr("y1",
B-2).attr("x2",-5).attr("y2",B+S),T=h.append("svg:path").style("stroke","#b33").style("stroke-width","1").style("fill","none").style("shape-rendering","crispEdges"),da=h.append("svg:circle").attr("cx",-5).attr("r",3).style("stroke","#000").style("stroke-width","1").style("fill","#fff").style("shape-rendering","geometricPrecision"),L=h.append("svg:g").attr("transform","translate(-100,0)"),oa=h.append("svg:g").attr("transform","translate(-100,0)"),Ja=16,Va=L.append("svg:rect").attr("height",32).attr("rx",
4).attr("ry",4).style("fill","#000").style("opacity",".7").style("stroke","none"),Ka=oa.append("svg:rect").attr("height",Ja).attr("rx",4).attr("ry",4).style("fill","#000").style("opacity",".7").style("stroke","none"),pa=L.append("svg:path").style("fill","#000").style("opacity",".7").style("stroke","none");L.append("svg:text").attr("transform","scale(1,-1)").attr("x",5).attr("y",-20).attr("fill","#fff").style("font-size","7pt").style("font-weight","bold").text("Median Outcome");var N=L.append("svg:text").attr("transform",
"scale(1,-1)").attr("x",5).attr("y",-6).attr("fill","#fff").style("font-size","7.5pt"),fa=N.append("svg:tspan").style("font-size","9pt"),Ba=N.append("svg:tspan").attr("dx",7);N.append("svg:tspan").text("%");N.append("svg:tspan").attr("dx",2).text("/");N.append("svg:tspan").attr("dx",2).text("year");var X=oa.append("svg:text").attr("transform","scale(1,-1)").attr("x",5).attr("y",-5).attr("fill","#fff").style("font-size","7pt").style("font-weight","bold"),ga=X.append("svg:tspan");X.append("svg:tspan").text("% Chance of Loss");
var h=d.append("svg:g").attr("class","key").attr("transform","translate("+(x-68-10.5)+","+(B+(S-112)/2)+")").style("shape-rendering","crispEdges"),ha=h.append("svg:defs"),i="plan-perf-gradient-"+(""+Math.random()).substring(2,8),ea="plan-perf-gradient-"+(""+Math.random()).substring(2,8),Z=ha.append("svg:linearGradient").attr("id",i).attr("x2",0).attr("y2",1);Z.append("svg:stop").attr("offset",0).attr("stop-color","#fff");Z.append("svg:stop").attr("offset",1).attr("stop-color","#080");ha=ha.append("svg:linearGradient").attr("id",
ea).attr("x2",0).attr("y2",1);ha.append("svg:stop").attr("offset",0).attr("stop-color","#fff");ha.append("svg:stop").attr("offset",1).attr("stop-color","#777");h.append("svg:rect").attr("width",6).attr("height",40).attr("x",35).attr("y",27).style("stroke","none").style("fill","url(#"+i+")");h.append("svg:rect").attr("width",6).attr("height",40).attr("x",29).attr("y",27).style("stroke","none").style("fill","url(#"+ea+")");h.append("svg:line").attr("x1",14).attr("y1",95).attr("x2",54).attr("y2",95).style("stroke",
"#ddd").style("stroke-width","1");h=h.append("svg:g").attr("transform","scale(1,-1)").style("font-size","7pt").style("fill","#333");h.append("svg:text").attr("x",35).attr("y",-99).style("fill","#888").style("text-anchor","middle").text("Key");h.append("svg:text").attr("x",35).attr("y",-18).style("text-anchor","middle").text("Less").append("svg:tspan").attr("x",35).attr("dy",10).text("Likely");h.append("svg:text").attr("x",35).attr("y",-82).style("text-anchor","middle").text("More").append("svg:tspan").attr("x",
35).attr("dy",10).text("Likely");var aa=d.append("svg:g").attr("transform","translate(-25,"+(B-9)+")").attr("class","slider").style("cursor","ew-resize"),la=aa.append("svg:defs").append("svg:linearGradient"),ra="plan-perf-gradient-"+(""+Math.random()).substring(2,8);la.attr("id",ra).attr("x2",0).attr("y2",1);la.append("svg:stop").attr("offset",0).attr("stop-color","#c8cbce");la.append("svg:stop").attr("offset",1).attr("stop-color","#f5f7f9");var qa=aa.append("svg:path").attr("d","M5.5 5.5a5,5 0 0,0 0,-10h-10a5,5 0 0,0 0,10Z").style("stroke",
"#000").style("stroke-width",".5").style("fill","url(#"+ra+")");aa.append("svg:line").attr("x1",-3).attr("x2",5).attr("y1",1).attr("y2",1).style("stroke","#999").style("stroke-width","4").style("stroke-dasharray","1").style("shape-rendering","crispEdges");aa.append("svg:line").attr("x1",-4).attr("x2",4).attr("y1",2).attr("y2",2).style("stroke","#fff").style("stroke-width","4").style("stroke-dasharray","1").style("shape-rendering","crispEdges");aa.append("svg:rect").attr("x",-3).attr("width",7).attr("height",
S+9).style("stroke","none").style("fill","#000").style("opacity","0");$(qa.node()).hover(function(){la.select("stop").attr("stop-color","#d8dbde")},function(){la.select("stop").attr("stop-color","#c8cbce")});p.mousedown(function(d){d.preventDefault();if(d.target.parentNode===aa.node()){qa.style("fill","#ddd");p.find("text").andSelf().css("cursor","ew-resize");var h=d.pageX-Ia.node().getBoundingClientRect().left,i=function(d){d=Math.min(x-M,Math.max(v,d.pageX-h-p[0].getBoundingClientRect().left));
n(d)},k=function(){qa.style("fill","url(#"+ra+")");p.find("text").andSelf().css("cursor","default");$(this).unbind("mousemove",i).unbind("mouseup",k)};$("body").mousemove(i).mouseup(k)}});p.data("update",q);return q}
function attachHistoricalChart(d,k,h,i,o,l){function s(d,h,i){var n=Math.max(l*i,Math.max.apply(Math,d),Math.max.apply(Math,h)),n=d3.scale.linear().domain([o*i,1.1*n]).ticks(10),p=n.pop();v.domain([n[0],p]);$(M.node()).data("update")();$(I.node()).data("update")();H.data([d]);h=h||[[k]];U.data([h]);$.each([H,U],function(){this.transition().duration(500).attr("d",za)});S.text(w.assetsAmount(i)).attr("y",-v(i)+4)}var n=i-h;if(!window.w.hasSVG())return dataStub;var q=$(d),p=12*n,r=q.width(),x=q.height(),
E=r-54-76,J=x-5-42,B=d3.scale.linear().domain([0,p]).range([54,54+E]),v=d3.scale.linear().range([42,42+J]),d=d3.select(d).insert("svg:svg").attr("width",r).attr("height",x).append("svg:g").attr("transform","scale(1,-1) translate(0,-"+x+")"),i=d3.scale.linear().domain([h,i]);d.append("svg:g").attr("class","x-labels").attr("transform","scale(1,-1)").attr("text-anchor","middle").style("fill","#777").style("font-size","8pt").selectAll("text").data(i.ticks(n/2)).enter().append("svg:text").attr("x",function(d){return B(12*
(d-h))}).attr("y",-16).text(function(d){return"'"+(10>d%100?"0"+d%100:d%100)});d.append("svg:g").attr("class","x-lines").style("fill","#000").style("opacity",".06").selectAll("rect").data(i.ticks(n+1)).enter().append("svg:rect").attr("x",function(d,h){return B(12*h)}).attr("y",42).attr("width",1).attr("height",J);d.append("svg:line").attr("class","x-ticks").attr("x1",54).attr("y1",44).attr("x2",54+E+1).attr("y2",44).style("stroke","#ddd").style("stroke-width","3").style("stroke-dasharray","0 7 1 6 1 6 1 6");
d.append("svg:line").attr("class","x-ticks").attr("x1",54).attr("y1",46).attr("x2",54+E+1).attr("y2",46).style("stroke","#ddd").style("stroke-width","2").style("stroke-dashoffset","14").style("stroke-dasharray","1 27");var M=d.append("svg:g").style("shape-rendering","crispEdges").style("stroke","#000").style("opacity",".06");$(M.node()).data("update",function(){var d=M.selectAll("line").data(v.ticks(10)).attr("y1",v).attr("y2",v);d.enter().append("svg:line").attr("x1",54).attr("x2",54+E).attr("y1",
v).attr("y2",v);d.exit().remove()}).data("update")();var I=d.append("svg:g").attr("transform","scale(1,-1)").style("fill","#777").style("font-size","8pt");$(I.node()).data("update",function(){var d=I.selectAll("text").data(v.ticks(10)).attr("y",function(d){return-v(d)+4}).text(function(d){return w.assetsAmount(d)});d.enter().append("svg:text").attr("x",54+E+10).attr("y",function(d){return-v(d)+4}).text(function(d){return w.assetsAmount(d)});d.exit().remove()}).data("update")();var S=d.append("svg:g").attr("transform",
"scale(1,-1)").attr("class","labels").style("fill","black").style("font-size","8pt").append("svg:text").attr("text-anchor","end").attr("x",48).attr("y",-v(k)+4).style("fill","#333").text(w.assetsAmount(k)),U=d.append("svg:g").attr("class","benchmark").append("svg:path"),H=d.append("svg:g").append("svg:path"),za=d3.svg.line().x(function(d,h){return B(h)}).y(function(d){return v(d)});q.data("update",s);return s}
function projectPerf(d,k,h,i,o){return projectPerfForPlan([{months:i,riskTol:d,model:o}],k,h,i)}function projectPerfForPlan(d,k,h,i){d=getCumulativeParametersForPlan(d,k,h,i);d=normalInverseCDF(d[0],d[1]).map(Math.exp);return{p01:d[1],p05:d[5],p10:d[10],p20:d[20],p50:d[50],p80:d[80],p90:d[90],p95:d[95],p99:d[99],loss:findProbability(d,1)}}function findProbability(d,k){for(var h=0,i=d[h],o=1;o<d.length;o++)Math.abs(d[o]-k)<Math.abs(i-k)&&(i=d[o],h=o);return h}
function logNormalPdf(d,k,h){k*=k;d=Math.log(h)-d;return Math.exp(-d*d/(2*k))/(h*Math.sqrt(2*Math.PI*k))}function normalInverseCDF(d,k){return unitNormalInverseCDF().map(function(h){return h*k+d})}function getCumulativeParameters(d,k,h,i,o){return getCumulativeParametersForPlan([{months:i,riskTol:d,model:o}],k,h,i)}
function getCumulativeParametersForPlan(d,k,h,i){var o=0,l=0,s=i,n=h,q;for(q in d){var p=d[q],r=p.months,x=getMonthlyParameters(p.riskTol,p.model),p=x[0],x=x[1],r=q==d.length-1?s:Math.min(s,r),E=estimateCommission(k,h,i,!q),J=0;0<h&&(J=estimateAdvisorFee(p,r,n));o+=p*r-E-J;l+=x*x*r;p=Math.exp(p);n*=Math.pow(p,r);s-=r;if(0==s)break}d=Math.sqrt(l);return[o,d]}function estimateCommission(d,k,h,i){if("I"!=d[0])return 0;d=k/63;return(0.0035*d*(i?1:0.05)+0.0035*0.05*h/12*d)/k}
function estimateAdvisorFee(d,k,h){var d=Math.exp(-d),i=0;if(1E4<h)i=0.0025/12*(k-1E4/h*(1-Math.pow(d,k-1))/(1-d));else{var o=Math.floor(Math.log(1E4/h)/Math.log(1/d));k>=o&&(h*=Math.pow(1/d,o),k-=o,i=0.0025/12*(k-1E4/h*(1-Math.pow(d,k-1))/(1-d)))}return i}
function getMonthlyParameters(d,k){var h=0<=k.indexOf("SAA2013")?Math.round(2*d)-1:Math.round(10*d)-1,h={SAA201301_TAX:[[0.027,0.063],[0.03,0.069],[0.032,0.075],[0.034,0.081],[0.037,0.088],[0.039,0.093],[0.041,0.099],[0.043,0.105],[0.044,0.11],[0.046,0.116],[0.048,0.121],[0.049,0.126],[0.051,0.132],[0.053,0.137],[0.054,0.142],[0.056,0.147],[0.057,0.152],[0.059,0.157],[0.061,0.162],[0.062,0.167]],SAA201301_IRA:[[0.03,0.061],[0.033,0.067],[0.036,0.073],[0.039,0.08],[0.041,0.085],[0.043,0.091],[0.045,
0.096],[0.047,0.102],[0.049,0.107],[0.051,0.113],[0.053,0.118],[0.055,0.123],[0.057,0.128],[0.058,0.133],[0.06,0.139],[0.062,0.143],[0.064,0.149],[0.065,0.154],[0.067,0.158],[0.068,0.163]],SAA201108:[[0.024691,0.05279],[0.025573,0.053521],[0.026569,0.054437],[0.027566,0.055419],[0.02823,0.056108],[0.029226,0.057192],[0.030223,0.058332],[0.031219,0.059526],[0.032216,0.06077],[0.033212,0.062062],[0.034209,0.063397],[0.034873,0.064311],[0.035868,0.065712],[0.036859,0.067143],[0.037847,0.068595],[0.038834,
0.070065],[0.039822,0.071554],[0.040481,0.072556],[0.041468,0.074071],[0.042456,0.075602],[0.043444,0.077147],[0.044432,0.078706],[0.045419,0.080277],[0.046405,0.081857],[0.047063,0.082915],[0.048049,0.084508],[0.049035,0.086109],[0.050022,0.087716],[0.051008,0.08933],[0.051994,0.090951],[0.05298,0.092577],[0.053638,0.093664],[0.054624,0.095299],[0.05561,0.09694],[0.056597,0.098585],[0.057583,0.100235],[0.058569,0.101889],[0.059227,0.102994],[0.060213,0.104655],[0.061199,0.10632],[0.062185,0.107988],
[0.063171,0.10966],[0.064158,0.111336],[0.065144,0.113014],[0.065801,0.114135],[0.066788,0.115819],[0.067774,0.117505],[0.06876,0.119194],[0.069746,0.120886],[0.070733,0.12258],[0.071719,0.124277],[0.072376,0.125409],[0.073363,0.12711],[0.074349,0.128812],[0.075335,0.130517],[0.076321,0.132223],[0.077308,0.133932],[0.078294,0.135642],[0.078951,0.136783],[0.079938,0.138497],[0.080924,0.140212],[0.08191,0.141928],[0.082896,0.143646],[0.083883,0.145366],[0.08454,0.146513],[0.085526,0.148235],[0.086513,
0.149958],[0.087499,0.151683],[0.088485,0.153408],[0.089471,0.155136],[0.090458,0.156864],[0.091115,0.158017],[0.092101,0.159747],[0.093088,0.161478],[0.094074,0.16321],[0.09506,0.164943],[0.096046,0.166678],[0.097032,0.168413],[0.09769,0.16957],[0.09871,0.171312],[0.099736,0.17307],[0.100762,0.174842],[0.10177,0.176631],[0.102745,0.178456],[0.103395,0.179695],[0.104369,0.181586],[0.105344,0.183516],[0.106319,0.185483],[0.107294,0.187486],[0.108269,0.189524],[0.109242,0.191597],[0.109887,0.193003],
[0.110855,0.195154],[0.111823,0.197351],[0.11279,0.199594],[0.113758,0.201882],[0.114726,0.204212],[0.115694,0.206583],[0.116339,0.208186],[0.117307,0.210623]],SAA201201:[[0.025212,0.054523],[0.025212,0.054523],[0.025212,0.054523],[0.025434,0.054632],[0.025434,0.054632],[0.025434,0.054632],[0.025434,0.054632],[0.025657,0.05478],[0.025657,0.05478],[0.025657,0.05478],[0.025657,0.05478],[0.025879,0.054965],[0.025879,0.054965],[0.025879,0.054965],[0.026101,0.055188],[0.026101,0.055188],[0.026101,0.055188],
[0.026324,0.055449],[0.026324,0.055449],[0.026566,0.055743],[0.026838,0.056047],[0.027383,0.056668],[0.028201,0.057627],[0.028746,0.058285],[0.029564,0.059298],[0.030109,0.059991],[0.030927,0.061053],[0.031745,0.062143],[0.032563,0.06326],[0.03338,0.064401],[0.034198,0.065565],[0.035016,0.066752],[0.035834,0.06796],[0.036651,0.069188],[0.037469,0.070435],[0.03856,0.072125],[0.03938,0.073409],[0.040474,0.07514],[0.041569,0.076891],[0.042664,0.07866],[0.043758,0.080447],[0.044853,0.08225],[0.046221,
0.084524],[0.047316,0.08636],[0.04841,0.088208],[0.049778,0.090536],[0.051147,0.092881],[0.052241,0.09477],[0.053609,0.097144],[0.054978,0.099532],[0.05634,0.101932],[0.057975,0.104823],[0.059338,0.107242],[0.060972,0.110153],[0.062607,0.113075],[0.064242,0.116006],[0.065877,0.118946],[0.067512,0.121893],[0.069147,0.124848],[0.070782,0.127809],[0.072689,0.131273],[0.074324,0.134247],[0.076231,0.137725],[0.078138,0.141209],[0.080046,0.1447],[0.081953,0.148197],[0.084133,0.1522],[0.08604,0.155709],
[0.08822,0.159724],[0.0904,0.163745],[0.09258,0.167772],[0.094767,0.171804],[0.09591,0.173837],[0.097053,0.175895],[0.098164,0.17798],[0.098702,0.179039],[0.09951,0.180652],[0.100318,0.182292],[0.101126,0.183957],[0.101934,0.185649],[0.103012,0.187943],[0.10382,0.189691],[0.104628,0.191463],[0.105435,0.193258],[0.106512,0.195685],[0.107318,0.197534],[0.108125,0.199409],[0.108927,0.20131],[0.10946,0.202597],[0.110259,0.204558],[0.110791,0.205886],[0.11159,0.207906],[0.112389,0.209961],[0.112922,0.211349],
[0.113721,0.213458],[0.11452,0.215599],[0.115318,0.21777],[0.116117,0.219971],[0.116916,0.222201],[0.117715,0.224458]],SAA201204:[[0.014982,0.054523],[0.014982,0.054523],[0.014982,0.054523],[0.015098,0.054632],[0.015098,0.054632],[0.015098,0.054632],[0.015098,0.054632],[0.015214,0.05478],[0.015214,0.05478],[0.015214,0.05478],[0.01533,0.054965],[0.01533,0.054965],[0.01533,0.054965],[0.01533,0.054965],[0.015446,0.055188],[0.015446,0.055188],[0.015446,0.055188],[0.015562,0.055449],[0.015562,0.055449],
[0.015698,0.055743],[0.015865,0.056047],[0.016199,0.056668],[0.0167,0.057627],[0.017033,0.058285],[0.017534,0.059298],[0.018035,0.060342],[0.018369,0.061053],[0.018869,0.062143],[0.01937,0.06326],[0.019871,0.064401],[0.020372,0.065565],[0.020872,0.066752],[0.021373,0.06796],[0.021874,0.069188],[0.022375,0.070435],[0.023043,0.072125],[0.023713,0.07384],[0.024217,0.07514],[0.024889,0.076891],[0.025561,0.07866],[0.026233,0.080447],[0.027072,0.082703],[0.027744,0.084524],[0.028416,0.08636],[0.029256,
0.088672],[0.029927,0.090536],[0.030767,0.092881],[0.031439,0.09477],[0.032279,0.097144],[0.033118,0.099532],[0.03412,0.102413],[0.034954,0.104823],[0.035788,0.107242],[0.03679,0.110153],[0.037791,0.113075],[0.038792,0.116006],[0.039793,0.118946],[0.040794,0.121893],[0.041795,0.124848],[0.042963,0.128304],[0.043965,0.131273],[0.045133,0.134744],[0.046301,0.138222],[0.047302,0.141209],[0.048637,0.145199],[0.049805,0.148697],[0.050973,0.1522],[0.052308,0.15621],[0.053476,0.159724],[0.054811,0.163745],
[0.056146,0.167772],[0.057488,0.171804],[0.058209,0.173837],[0.05893,0.175895],[0.059619,0.17798],[0.060111,0.179574],[0.060439,0.180652],[0.060931,0.182292],[0.061422,0.183957],[0.061914,0.185649],[0.06257,0.187943],[0.063062,0.189691],[0.063553,0.191463],[0.064045,0.193258],[0.0647,0.195685],[0.065189,0.197534],[0.065679,0.199409],[0.066164,0.20131],[0.066485,0.202597],[0.066966,0.204558],[0.067287,0.205886],[0.067768,0.207906],[0.068249,0.209961],[0.06857,0.211349],[0.069051,0.213458],[0.069532,
0.215599],[0.070013,0.21777],[0.070494,0.219971],[0.070975,0.222201],[0.071457,0.224458]],SAA201210:[[0.021207,0.056869],[0.022475,0.058861],[0.023382,0.060377],[0.024107,0.06164],[0.024832,0.062943],[0.025375,0.063945],[0.025919,0.064968],[0.026463,0.066011],[0.027006,0.067072],[0.02755,0.068151],[0.027913,0.06888],[0.028275,0.069616],[0.028819,0.070733],[0.029181,0.071487],[0.029544,0.072247],[0.030087,0.073398],[0.03045,0.074173],[0.030812,0.074954],[0.031175,0.075738],[0.031537,0.076528],[0.0319,
0.077322],[0.032262,0.07812],[0.032625,0.078923],[0.032987,0.07973],[0.03335,0.080541],[0.033712,0.081355],[0.034075,0.082174],[0.034437,0.082996],[0.0348,0.083822],[0.034981,0.084236],[0.035343,0.085066],[0.035706,0.085901],[0.036068,0.086738],[0.036431,0.087578],[0.036793,0.088422],[0.036975,0.088844],[0.037337,0.089692],[0.037699,0.090543],[0.038062,0.091396],[0.038243,0.091824],[0.038606,0.092681],[0.038968,0.09354],[0.039149,0.093971],[0.039512,0.094833],[0.039874,0.095697],[0.040237,0.096562],
[0.040418,0.096995],[0.040781,0.097863],[0.041143,0.098731],[0.041324,0.099166],[0.042593,0.102217],[0.043499,0.104406],[0.044405,0.106601],[0.045311,0.108802],[0.046218,0.11101],[0.047124,0.113223],[0.04803,0.115441],[0.048936,0.117664],[0.049842,0.119892],[0.050567,0.121678],[0.051474,0.123914],[0.05238,0.126154],[0.053286,0.128398],[0.054192,0.130645],[0.054917,0.132446],[0.055823,0.134699],[0.056729,0.136956],[0.057636,0.139216],[0.058361,0.141025],[0.059267,0.14329],[0.060173,0.145557],[0.060898,
0.147373],[0.061804,0.149645],[0.06271,0.151919],[0.063435,0.15374],[0.064341,0.156018],[0.065248,0.158298],[0.065973,0.160123],[0.066879,0.162406],[0.067785,0.164713],[0.06851,0.16663],[0.069235,0.168613],[0.06996,0.170659],[0.070503,0.172234],[0.071228,0.174386],[0.071772,0.176038],[0.072316,0.177726],[0.07286,0.179455],[0.073403,0.181223],[0.073947,0.183029],[0.074491,0.184872],[0.074853,0.186121],[0.075397,0.188029],[0.075759,0.189331],[0.076303,0.191327],[0.076666,0.192687],[0.077209,0.194768],
[0.077572,0.196183],[0.077934,0.19762],[0.078297,0.199077]]}[k][h];return[h[0]/12,h[1]/Math.sqrt(12)]}
function unitNormalInverseCDF(){return[-Infinity,-2.326348,-2.053749,-1.880794,-1.750686,-1.644854,-1.554774,-1.475791,-1.405072,-1.340755,-1.281552,-1.226528,-1.174987,-1.126391,-1.080319,-1.036433,-0.994458,-0.954165,-0.915365,-0.877896,-0.841621,-0.806421,-0.772193,-0.738847,-0.706303,-0.67449,-0.643345,-0.612813,-0.582842,-0.553385,-0.524401,-0.49585,-0.467699,-0.439913,-0.412463,-0.38532,-0.358459,-0.331853,-0.305481,-0.279319,-0.253347,-0.227545,-0.201893,-0.176374,-0.150969,-0.125661,-0.100434,
-0.07527,-0.050154,-0.025069,0,0.025069,0.050154,0.07527,0.100434,0.125661,0.150969,0.176374,0.201893,0.227545,0.253347,0.279319,0.305481,0.331853,0.358459,0.38532,0.412463,0.439913,0.467699,0.49585,0.524401,0.553385,0.582842,0.612813,0.643345,0.67449,0.706303,0.738847,0.772193,0.806421,0.841621,0.877896,0.915365,0.954165,0.994458,1.036433,1.080319,1.126391,1.174987,1.226528,1.281552,1.340755,1.405072,1.475791,1.554774,1.644854,1.750686,1.880794,2.053749,2.326348]}
function HistoricalPerfSimulator(d,k,h){this.etfExpenses=k;this.etfPrices=d;this.returns=h}HistoricalPerfSimulator.prototype.simulateAllocation=function(d,k,h,i,o){if(!d)return null;for(var l=this.isBenchmark(d),i=null!=i?i:this.returns.US_STOCKS.length,s=[h],n={},q=0,p=0;p<i;p++){0==p%12&&(o||0==p)&&this.rebalance(n,d,h,k);var h=0,r;for(r in n){var x=this.rateOfReturn(r,p);l||(x-=q,x-=this.etfExpenses[r]/12);x*=n[r];n[r]=x;h+=x}q=this.advisoryFee(h)/12;s.push(h)}return s};
HistoricalPerfSimulator.prototype.isBenchmark=function(d){var k=0,h;for(h in d)0<d[h]&&k++;return 1==k};HistoricalPerfSimulator.prototype.rebalance=function(d,k,h,i){for(var o in k){var l=h*(k[o]||0),s=this.computeCommission(o,i,Math.abs(l-(d[o]||0)));d[o]=l-s}};HistoricalPerfSimulator.prototype.computeCommission=function(d,k,h){k="I"!=k[0];return(k?2:0)+Math.floor(h/(this.etfPrices[d]||0))*(k?0.0025:0.0035)};HistoricalPerfSimulator.prototype.rateOfReturn=function(d,k){return this.returns[d][k]};
HistoricalPerfSimulator.prototype.advisoryFee=function(d){return 0.0025*Math.max(0,d-1E4)/d};HistoricalPerfSimulator.HistoricalData={};HistoricalPerfSimulator.HistoricalData.startDate=new Date(1997,3);HistoricalPerfSimulator.HistoricalData.endDate=new Date(2012,12);var w=w||{};
w.planPage={initialize:function(d,k,h,i,o,l,s){this.initialRecommendedRisk=parseFloat(k.rec||1);this.initialPlan=k;this.initialRisk=parseFloat(k.tol||1);this.taxableModel=l;this.nonTaxableModel=s;this.model(o.name);this.allocation.bindTo(this.risk,this.model);this.fee.bindTo(this.allocation,h);this.managementFee.bindTo(this.amount);this.commissions.bindTo(d,this.amount,this.allocation,i);this.modelName.bindTo(this.model);this.risk.bindTo($R._,this.model);this.isHighRisk.bindTo(this.initialRecommendedRisk,
this.risk);this.serializedPlan.bindTo(this.model,this.risk,this.amount);this.risk(this.initialRisk);this.amount(parseFloat(k.amount||5E3))},amount:$R.value(5E3),risk:$R(function(d,k){if(void 0===d)return w.planPage._riskValue;var h=w.plan.cleanRisk(d,k.max_risk,k.min_risk,k.granularity);return w.planPage._riskValue=h}),isHighRisk:$R(function(d,k){return 1<k-d}),model:$R(function(d){return d==w.planPage.taxableModel.name?w.planPage.taxableModel:d==w.planPage.nonTaxableModel.name?w.planPage.nonTaxableModel:
null}),modelName:$R(function(d){return d.name}),allocation:$R(function(d,k){return w.plan.getAllocation(d,k)}),fee:$R(function(d,k){return _.reduce(d,function(d,i,o){return d+i*k[o]},0)}),managementFee:$R(function(d){return Math.max(0,0.25*(d-w.freemiumAmount())/d)}),commissions:$R(function(d,k,h,i){return"I"!=d[0].toUpperCase()?0:_.chain(h).reduce(function(d,h,s){return d+0.0035*Math.floor(k*h/i[s])},0).value()}),serializedPlan:$R(function(d,k,h){return serializePlan(_.chain(w.planPage.initialPlan).clone().extend({tol:k,
amount:h}).value(),d.model_number)})};
