w=w||{};w.newPlan={initialize:function(a,b){this.planCookie.bindTo(a,w.planPage.serializedPlan);this.questionsPath=b},planCookie:$R(function(a,b){w.cookie(a,b,14)})};$(function(){$(".account-type-tab").on("click",function(){w.planPage.model($(this).data("allocation-model"))});$R(function(a){$(".account-type-tab").removeClass("active");$(".account-type-tab[data-allocation-model="+a+"]").addClass("active")}).bindTo(w.planPage.modelName)});
$(function(){$("#open-account").click(function(a){a.preventDefault();w.planPage.isHighRisk()?w.dialog2("#risk-tol-warning-box"):location=$(this).data("url")});$("#risk-tol-warning-continue").click(function(){location=$(this).data("url")})});$(function(){$R.dom("#amount-to-invest").linkInput(w.planPage.amount,function(a){return w.dollarAmount(a,0)},function(a){return Math.max(5E4,w.parseDollarAmount(a))})});
$(function(){$("#save-your-plan").click(function(){$(".save-plan-button").removeAttr("disabled");$("#save-msg").empty();$("#save-email").val("");w.dialog2("#save-box");$("#save-email").focus()});$("#save-form").submit(function(){var a=$("#save-email");w.isValidEmailAddress(a.val())?($("#save-msg").text("Saving..."),$("#save-values").val(w.planPage.serializedPlan()),$("<input type=hidden name=js value=y>").appendTo(this),w.post(this.action,$(this).serialize(),function(){$("#save-msg").text("Plan saved, email sent.");
$(".save-plan-button").attr("disabled","true");setTimeout(function(){w.dialog2("#save-box")},1E3)},function(){$("#save-msg").text("Error: Failed to save plan").addClass("error").delay(2E3).fadeOut(function(){$(this).removeClass("error").empty().show()})})):a.addClass("error").focus().select();return!1});$("#save-email").focus(function(){var a=$(this);a.hasClass("error")&&a.data("i",setInterval(function(){w.isValidEmailAddress(a.val())&&a.removeClass("error").triggerHandler("blur")},100))}).blur(function(){clearInterval($(this).data("i"))})});
$(function(){$("#change-answers").on("click",function(a){a.preventDefault();location=w.newPlan.questionsPath})});
$(function(){function a(){w.trackEvent("OFA","plan_faq_show",this.id)}$(".faq-container > .common-q > li > .ktip-link").on("tip.show",a);$(".allocation-questions .ktip-link").on("tip.show",a);$("#faq-amount").on("tip.show",a);$("#allocation .asset-class-investment .ktip-link").on("tip.show",function(){var a=$(this).closest(".asset-class-investment").data("etf");w.trackEvent("OFA","plan_faq_show","why-"+a)});$("#allocation .asset-class-name .ktip-link").on("tip.show",function(){var a=$(this).find(".ktip-a").text();
w.trackEvent("OFA","plan_faq_show","why-allocate-"+a)});$("#save-your-plan").on("click",function(){w.trackEvent("OFA","plan_save_show")});$("#open-account").on(function(){w.trackEvent("OFA","signup_button",this.id)});$("#change-answers").on(function(){w.trackEvent("OFA","plan-change-answers")});$("#revert-risk").on(function(){w.trackEvent("OFA","risk-control-change","revert",w.planPage.initialRecommendedRisk)});$(".risk-adjust").on("click",function(){w.trackEvent("OFA","risk-control-change","risk-down"==
this.id?"decrease":"increase")});$(".lozenge-tab").on("click",function(){w.trackEvent("OFA","plan-page-tab",this.id)})});
