(function(){function b(a,c){var d=function(){var a=e(d),c=_.first(a).run.apply(d,arguments);_.chain(a).rest().invoke("run");return c};d.id=_.uniqueId();d.context=c||f;d.fnc=a;d.dependents=[];d.dependencies=[];d.memo=b.empty;return _.extend(d,g,b.pluginExtensions)}function e(a){function c(a){if(b[a])return[];b[a]=!0;return _.map(a.dependents,c).concat(a)}var b={};return _.chain(c(a)).flatten().reverse().value()}function h(a){return a&&(a._isReactive||a==b._)?a:b(function(){return a})}var f=this;b._=
{};b.empty={};b.value=function(a){var c=b(function(){arguments.length&&(this.val=arguments[0]);return this.val});c.context=c;c.val=a;return c};b.pluginExtensions={};var g={_isReactive:!0,toString:function(){return this.id+":"+this.fnc.toString()},get:function(){return this.memo===b.empty?this.run():this.memo},run:function(){return this.memo=this.fnc.apply(this.context,this.argumentList(Array.prototype.slice.call(arguments)))},bindTo:function(){var a=Array.prototype.slice.call(arguments).map(h);_.chain(a).difference(this.dependencies).filter(function(a){return a!==
b._}).invoke("addDependent",this);_.chain(this.dependencies).difference(a).filter(function(a){return a!==b._}).invoke("removeDependent",this);this.dependencies=a;return this},removeDependent:function(a){this.dependents=_.without(this.dependents,a)},addDependent:function(a){this.dependents=_.union(this.dependents,a)},argumentList:function(a){return _.map(this.dependencies,function(c){if(c===b._)return a.shift();if(c._isReactive)return c.get()}).concat(a)}};window.$R=b})();
